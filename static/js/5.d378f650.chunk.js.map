{"version":3,"sources":["data/models/item-set.model.ts","data/item-sets.ts","shared/check-which-sets-are-equipped.ts","shared/calculate-other-properties.ts","shared/calculate-stats-from-items.ts","components/calculator/stats-calculator/equipment/equipment-slots/shared/ItemTooltip.tsx","components/calculator/stats-calculator/equipment/equipment-slots/shared/ItemEnhancementForm.tsx","components/calculator/stats-calculator/equipment/equipment-slots/item-display/ItemComponent.tsx","components/calculator/stats-calculator/equipment/equipment-slots/shared/ItemCreatorForm.tsx","components/calculator/stats-calculator/equipment/equipment-slots/item-display/ItemsList.tsx","components/calculator/stats-calculator/equipment/equipment-slots/ItemSlot.tsx","components/calculator/stats-calculator/equipment/equipment-slots/SpecialSlot.tsx","components/calculator/stats-calculator/equipment/equipment-slots/PsychoSlot.tsx","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/calculator/stats-calculator/equipment/equipment-slots/shared/GuildBuffsForm.tsx","components/calculator/stats-calculator/equipment/equipment-slots/GuildSlot.tsx","components/calculator/stats-calculator/equipment/equipment-slots/item-display/ItemSearchList.tsx","components/calculator/stats-calculator/equipment/Equipment.tsx","components/calculator/stats-calculator/stat-line/stat-buttons/StatIncrementButton.tsx","components/calculator/stats-calculator/stat-line/stat-buttons/StatDecrementButton.tsx","components/calculator/stats-calculator/stat-line/regeneration-tooltip/RegenerationTooltip.tsx","components/calculator/stats-calculator/stat-line/StatLine.tsx","components/calculator/stats-calculator/resist-line/ResLine.tsx","components/calculator/stats-calculator/other-line/OtherLine.tsx","data/resistance-table.ts","components/calculator/stats-calculator/StatsCalculator.tsx"],"names":["ItemSet","setProperties","name","hp","mana","endurance","strength","agility","power","knowledge","totalPieces","otherProperties","this","hasOwnProperty","pieces","getValuesDependingOnPieces","bind","getOtherPropertiesValuesDependingOnPieces","getOtherPropertiesValuesDependingOnPiecesAsArray","getValueModifier","currentPieces","valueModifier","Math","floor","map","x","valueDependingOnPieces","i18n","t","abs","itemSets","checkWhichSetsAreEquipped","equipment","Object","keys","reduce","total","set","calculateOtherProperties","propertiesOfSets","equippedSets","setsProperties","setName","find","forEach","property","checkPropertiesOfSets","propertiesOfEquippedItems","item","rarity","type","psychoLvl","checkOtherPropertiesOfItems","calculateStatsFromItems","level","equippedItems","statsFromSets","setsEquipped","length","key","eqippedSetProperties","calculateStateFromSets","calculateTotalStat","damage","calculateTotalDamage","weapon","special","fireRes","frostRes","energyRes","curseRes","pierceRes","cutRes","bluntRes","totalDamage","ConnectedItemTooltip","color","props","style","nameColor","notMeetingRequirements","negativeStats","setColor","equippedSet","otherSetProperties","className","onClick","event","stopPropagation","isCustom","number","slice","randomStats","class","undefined","reqLvl","reqStr","reqAgi","reqPow","reqKno","weaponType","damageType","enhancements","React","Component","connector","connect","state","ItemTooltip","withTranslation","ConnectedItemEnhancementForm","properties","value","propertiesUsed","handleChange","handleSelect","addNewSelect","enhanceItem","areEnhancementsPresent","setState","prevState","newState","push","shift","every","window","alert","closeForm","functionToRun","preventDefault","index","currentState","splice","closeButton","handleClick","options","disabled","includes","propertySelects","src","alt","required","onChange","currentTarget","placeholder","min","max","removeSelect","onSubmit","onMouseEnter","dispatch","slot","ItemEnhancementForm","ItemComponent","displayTooltip","itemStyle","borderColor","itemBackground","backgroundImage","image","showTooltip","onMouseLeave","hideTooltip","onTouchStart","onTouchEnd","equipItem","hideItemsList","search","ConnectedItemCreatorForm","createItem","itemProperties","createdItem","Item","ReactGA","category","action","label","addItem","closeList","ItemCreatorForm","ConnectedItemsList","displayAddItemForm","showAddItemForm","hideAddItemForm","equippableItems","items","filter","unequippableItems","equippableItemsComponents","title","unequippableItemsComponents","ItemsList","ConnectedItemSlot","showForm","hideForm","displayEnhancementForm","prevProps","inSlot","isEquivalent","unequipItem","hideTip","showList","unequipButton","enhanceButton","addPsychoLvlButton","changePsychoLvl","substractPsychoLvlButton","noItemsWarning","hideTooltipWithListUp","showItemsList","listToDisplay","ItemSlot","ConnecedSpecialSlot","handleSubmit","specialItem","propertyInputs","parseInt","target","maxLength","SpecialSlot","ConnectedPsychoSlot","showOtherProperties","otherPropertiesTags","otherPropertiesList","PsychoSlot","_slicedToArray","arr","i","Array","isArray","Symbol","iterator","prototype","toString","call","_arr","_n","_d","_e","_s","_i","next","done","err","TypeError","ConnectedGuildBuffsForm","templeLevel","physRes","manaUsage","enduranceUsage","regeneration","accum","buff","attribute","maxAttrValue","guildBuffs","calculateBuffValue","checkBoxes","checkIfBoxShouldBeDisabled","checked","htmlFor","resetButton","left","guild","character","GuildBuffsForm","GuildSlot","useState","tooltip","toggleTooltip","ConnectedItemsSearchList","isRing1Equipped","ItemsSearchList","ConnectedEquipment","checkIfAnyItemIsEquipped","applyItemFilters","searchString","filters","rare","psychoRare","epic","confirmAlert","customUI","onClose","unequipAllItems","isAnyItemEquipped","itemsToFilter","filterType","classBackground","equipmentSlotComponents","y","areAnyItemsEquipped","filterTypes","chosenFilters","filtersCloseButton","filtersResetButton","language","toLowerCase","ring1","data-placeholder","unequipItems","stats","EquipmentComponent","StatIncrementButton","stat","pointsLeft","spendStatPoints","StatDecrementButton","statValue","RegenerationTooltip","regenRate","StatLine","buttonElements","buttonValue","statName","fromItems","onContextMenu","ResLine","percentageValue","OtherLine","resTable","ConnectedStatsCalculator","reset","changeStat","resetStatPoints","res","statsFromItems","round","calculateResistances","statComponents","statPts","resistComponents","calculateTotalPower"],"mappings":"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KAAO,OAC9BpK,IAAK/D,EAAMmO,KACX3N,UAAWR,EAAMmO,OAEnB,yBAAK3N,UAAU,mBACb,yBAAKA,UAAU,YACZR,EAAM6O,SADT,IACoB7O,EAAMmC,S,cCg+BnBgN,GA5+BY,CACzB,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,KACA,GACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,GACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,GACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,GACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,GACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,GACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,GACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,KACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,GACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,MACA,KACA,MAC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","file":"static/js/5.d378f650.chunk.js","sourcesContent":["//i18l\r\nimport i18n from \"i18next\";\r\n\r\nexport class ItemSet {\r\n  readonly name: string;\r\n  readonly hp: number;\r\n  readonly mana: number;\r\n  readonly endurance: number;\r\n  readonly strength: number;\r\n  readonly agility: number;\r\n  readonly power: number;\r\n  readonly knowledge: number;\r\n  readonly totalPieces: number;\r\n  readonly otherProperties: [string, number][];\r\n  constructor(setProperties: ItemSetProperties) {\r\n    this.name = setProperties.hasOwnProperty(\"name\") ? setProperties.name! : \"\";\r\n    this.hp = setProperties.hasOwnProperty(\"hp\") ? setProperties.hp! : 0;\r\n    this.mana = setProperties.hasOwnProperty(\"mana\") ? setProperties.mana! : 0;\r\n    this.endurance = setProperties.hasOwnProperty(\"endurance\")\r\n      ? setProperties.endurance!\r\n      : 0;\r\n    this.strength = setProperties.hasOwnProperty(\"strength\")\r\n      ? setProperties.strength!\r\n      : 0;\r\n    this.agility = setProperties.hasOwnProperty(\"agility\")\r\n      ? setProperties.agility!\r\n      : 0;\r\n    this.power = setProperties.hasOwnProperty(\"power\")\r\n      ? setProperties.power!\r\n      : 0;\r\n    this.knowledge = setProperties.hasOwnProperty(\"knowledge\")\r\n      ? setProperties.knowledge!\r\n      : 0;\r\n    this.totalPieces = setProperties.hasOwnProperty(\"pieces\")\r\n      ? setProperties.pieces!\r\n      : 3;\r\n    this.otherProperties = setProperties.hasOwnProperty(\"otherProperties\")\r\n      ? setProperties.otherProperties!\r\n      : [];\r\n    this.getValuesDependingOnPieces = this.getValuesDependingOnPieces.bind(this);\r\n    this.getOtherPropertiesValuesDependingOnPieces = this.getOtherPropertiesValuesDependingOnPieces.bind(this);\r\n    this.getOtherPropertiesValuesDependingOnPiecesAsArray = this.getOtherPropertiesValuesDependingOnPiecesAsArray.bind(this);\r\n    this.getValueModifier = this.getValueModifier.bind(this);\r\n  }\r\n  //Method returning the values the set provides depending on the number of pieces worn\r\n  public getValuesDependingOnPieces(currentPieces: number): SetPropertiesDependingOnPieces {\r\n    //getting the modifier of the value each stat provides\r\n    let valueModifier: number = this.getValueModifier(currentPieces);\r\n    //calculating values\r\n    let propertyValues: SetPropertiesDependingOnPieces = {\r\n      hp: Math.floor(this.hp * valueModifier),\r\n      mana: Math.floor(this.mana * valueModifier),\r\n      endurance: Math.floor(this.endurance * valueModifier),\r\n      strength: Math.floor(this.strength * valueModifier),\r\n      agility: Math.floor(this.agility * valueModifier),\r\n      knowledge: Math.floor(this.knowledge * valueModifier),\r\n      power: Math.floor(this.power * valueModifier),\r\n      otherProperties: this.getOtherPropertiesValuesDependingOnPieces(valueModifier)\r\n    }\r\n    return propertyValues\r\n  }\r\n  private getValueModifier(currentPieces: number): number {\r\n    let valueModifier: number = 0;\r\n    switch (currentPieces / this.totalPieces) {\r\n      case 1:\r\n        valueModifier = 1;\r\n        break;\r\n      case 0.8:\r\n        valueModifier = 0.6;\r\n        break;\r\n      case 0.75:\r\n        valueModifier = 0.5;\r\n        break;\r\n      case 2 / 3:\r\n        valueModifier = 0.4;\r\n        break;\r\n      case 0.6:\r\n        valueModifier = 0.4;\r\n        break;\r\n      case 0.5:\r\n        valueModifier = 0.25;\r\n        break;\r\n      case 0.4:\r\n        valueModifier = 0.2;\r\n        break;\r\n      default:\r\n        valueModifier = 0;\r\n        break;\r\n    }\r\n    return valueModifier\r\n  }\r\n  //Method returning the value of the otherProperties property in an easy to show form\r\n  private getOtherPropertiesValuesDependingOnPieces(valueModifier: number): string[] {\r\n    let propertyValues = this.otherProperties.map((x) => {\r\n      let valueDependingOnPieces: number = 0;\r\n      if (x[1] !== 1) {\r\n        valueDependingOnPieces = Math.floor(x[1] * valueModifier * 100) / 100;\r\n        let otherPropertyAsString = x[1] < 0 ? i18n.t(x[0]) + \": -\" + Math.abs(valueDependingOnPieces) + \"% (\" + x[1] + \"%)\" : i18n.t(x[0]) + \": +\" + valueDependingOnPieces + \"% (\" + x[1] + \"%)\"\r\n        return otherPropertyAsString;\r\n      } else {\r\n        valueDependingOnPieces = valueModifier === 1 ? 1 : 0;\r\n        return i18n.t(x[0]) + \": +\" + valueDependingOnPieces + \" (\" + x[1] + \")\";\r\n      }\r\n    });\r\n    return propertyValues;\r\n  }\r\n  public getOtherPropertiesValuesDependingOnPiecesAsArray(currentPieces: number): [string, number][] {\r\n    let valueModifier: number = this.getValueModifier(currentPieces);\r\n    let otherPropertyValues: [string, number][] = this.otherProperties.map(x => {\r\n      let valueDependingOnPieces: number = 0;\r\n      if (x[1] !== 1) {\r\n        valueDependingOnPieces = Math.floor(x[1] * valueModifier * 100) / 100;\r\n        return [i18n.t(x[0]), valueDependingOnPieces];\r\n      } else {\r\n        valueDependingOnPieces = valueModifier === 1 ? 1 : 0;\r\n        return [i18n.t(x[0]), valueDependingOnPieces]\r\n      }\r\n    });\r\n    return otherPropertyValues\r\n  }\r\n}\r\n\r\nexport interface ItemSetProperties {\r\n  name: string;\r\n  hp?: number;\r\n  mana?: number;\r\n  endurance?: number;\r\n  strength?: number;\r\n  agility?: number;\r\n  power?: number;\r\n  knowledge?: number;\r\n  pieces: number;\r\n  otherProperties: [string, number][];\r\n}\r\n\r\nexport interface SetPropertiesDependingOnPieces {\r\n  hp: number;\r\n  mana: number;\r\n  endurance: number;\r\n  strength: number;\r\n  agility: number;\r\n  power: number;\r\n  knowledge: number;\r\n  otherProperties: string[]\r\n}\r\n","import { ItemSet } from \"./models/item-set.model\"\r\nimport { ItemSetProperties } from \"./models/item-set.model\"\r\n\r\nconst itemSetData: ItemSetProperties[] = [{\r\n  name: \"Resztki Reffa\",\r\n  pieces: 3,\r\n  strength: 8,\r\n  otherProperties: [\r\n    [\"Regeneracja many\", 2],\r\n    [\"Regeneracja kondycji\", 2],\r\n    [\"Rozproszenie Holma\", 10]\r\n  ]\r\n},\r\n{\r\n  name: \"Okowy Snu\",\r\n  pieces: 3,\r\n  hp: 50,\r\n  otherProperties: [\r\n    [\"Szansa na trafienie krytyczne\", 8]\r\n  ]\r\n},\r\n{\r\n  name: \"Światła Tellabagu\",\r\n  pieces: 3,\r\n  hp: 100,\r\n  otherProperties: [\r\n    [\"Modyfikator obrażeń fizycznych\", 10],\r\n    [\"Modyfikator obrażeń magicznych\", 10]\r\n  ]\r\n},\r\n{\r\n  name: \"Przebranie Ludobójcy\",\r\n  pieces: 4,\r\n  otherProperties: [\r\n    [\"Skok Farida\", 10],\r\n    [\"Szansa na podwójny atak\", 6]\r\n  ]\r\n},\r\n{\r\n  name: \"Zbroja Pinari\",\r\n  pieces: 3,\r\n  hp: 40,\r\n  otherProperties: [\r\n    [\"Odporność na korzenie\", 35],\r\n    [\"Szansa na podwójny atak\", 8]\r\n  ]\r\n},\r\n{\r\n  name: \"Gniew Żywiołów\",\r\n  pieces: 4,\r\n  mana: 160,\r\n  otherProperties: [\r\n    [\"Regeneracja many\", 2],\r\n    [\"Modyfikator obrażeń magicznych\", 15]\r\n  ]\r\n},\r\n{\r\n  name: \"Żądło Bogów\",\r\n  pieces: 4,\r\n  agility: 16,\r\n  otherProperties: [\r\n    [\"Regeneracja many\", 2],\r\n    [\"Regeneracja kondycji\", 2],\r\n    [\"Szansa na trafienie krytyczne\", 8]\r\n  ]\r\n},\r\n{\r\n  name: \"Ryk Północy\",\r\n  pieces: 5,\r\n  agility: 16,\r\n  otherProperties: [\r\n    [\"Modyfikator obrażeń fizycznych\", 10],\r\n    [\"Szansa na trafienie krytyczne\", 10]\r\n  ]\r\n},\r\n{\r\n  name: \"Sztorm Haugura\",\r\n  pieces: 4,\r\n  hp: 160,\r\n  otherProperties: [\r\n    [\"Zużycie kondycji\", -8],\r\n    [\"Szansa na trafienie krytyczne\", 10]\r\n  ]\r\n},\r\n{\r\n  name: \"Ostrze Równowagi\",\r\n  pieces: 4,\r\n  hp: 160,\r\n  otherProperties: [\r\n    [\"Regeneracja many\", 2],\r\n    [\"Regeneracja kondycji\", 2],\r\n    [\"Szansa na podwójny atak\", 10]\r\n  ]\r\n},\r\n{\r\n  name: \"Ukazanie Killarasuna\",\r\n  pieces: 4,\r\n  hp: 190,\r\n  otherProperties: [\r\n    [\"Zużycie many\", -10],\r\n    [\"Szansa na podwójny atak\", 8]\r\n  ]\r\n},\r\n{\r\n  name: \"Szaty Płynnego Ognia\",\r\n  pieces: 4,\r\n  mana: 160,\r\n  otherProperties: [\r\n    [\"Modyfikator obrażeń magicznych\", 10],\r\n    [\"Szansa na podwójny atak\", 5]\r\n  ]\r\n},\r\n{\r\n  name: \"Pancerz Vorlingów\",\r\n  pieces: 5,\r\n  hp: 250,\r\n  otherProperties: [\r\n    [\"Rozproszenie Holma\", 9],\r\n    [\"Obrona wręcz\", 10],\r\n    [\"Odporność na trafienie krytyczne\", 9],\r\n    [\"Dodatkowe PA\", 1],\r\n    [\"Oszukać przeznaczenie\", 1]\r\n  ]\r\n},\r\n{\r\n  name: \"Dusza Świata\",\r\n  pieces: 5,\r\n  hp: 250,\r\n  otherProperties: [\r\n    [\"Rozproszenie Holma\", 9],\r\n    [\"Modyfikator trafień fizycznych\", 15],\r\n    [\"Szansa na podwójny atak\", 5],\r\n    [\"Dodatkowe PA\", 1],\r\n    [\"Oszukać przeznaczenie\", 1]\r\n  ]\r\n},\r\n{\r\n  name: \"Oko Bogów\",\r\n  pieces: 5,\r\n  hp: 250,\r\n  otherProperties: [\r\n    [\"Rozproszenie Holma\", 9],\r\n    [\"Szansa na podwójny atak\", 5],\r\n    [\"Modyfikator trafień dystansowych\", 15],\r\n    [\"Dodatkowe PA\", 1],\r\n    [\"Oszukać przeznaczenie\", 1]\r\n  ]\r\n},\r\n{\r\n  name: \"Pancerz Nieśmiertelności\",\r\n  pieces: 5,\r\n  hp: 250,\r\n  otherProperties: [\r\n    [\"Rozproszenie Holma\", 9],\r\n    [\"Modyfikator obrażeń fizycznych\", 15],\r\n    [\"Modyfikator trafień fizycznych\", 15],\r\n    [\"Dodatkowe PA\", 1],\r\n    [\"Oszukać przeznaczenie\", 1]\r\n  ]\r\n},\r\n{\r\n  name: \"Pancerz Żywiołów\",\r\n  pieces: 5,\r\n  hp: 250,\r\n  otherProperties: [\r\n    [\"Skok Farida\", 7],\r\n    [\"Regeneracja many\", 2],\r\n    [\"Modyfikator obrażeń magicznych\", 15],\r\n    [\"Dodatkowe PA\", 1],\r\n    [\"Oszukać przeznaczenie\", 1]\r\n  ]\r\n},\r\n{\r\n  name: \"Pocałunek Miliona Gwiazd\",\r\n  pieces: 5,\r\n  hp: 250,\r\n  otherProperties: [\r\n    [\"Skok Farida\", 7],\r\n    [\"Modyfikator trafień dystansowych\", 15],\r\n    [\"Modyfikator obrażeń magicznych\", 15],\r\n    [\"Dodatkowe PA\", 1],\r\n    [\"Oszukać przeznaczenie\", 1]\r\n  ]\r\n},\r\n{\r\n  name: \"Zasłona Śmierci\",\r\n  pieces: 5,\r\n  hp: 250,\r\n  otherProperties: [\r\n    [\"Skok Farida\", 7],\r\n    [\"Modyfikator trafień magicznych\", 15],\r\n    [\"Szansa na podwójny atak\", 5],\r\n    [\"Dodatkowe PA\", 1],\r\n    [\"Oszukać przeznaczenie\", 1]\r\n  ]\r\n}]\r\n\r\nexport const itemSets = itemSetData.map(x => new ItemSet(x))\r\n","import { Equipment } from \"../store/equipment-reducer/equipment-reducer\"\r\n\r\ninterface SetsEquipped {\r\n    [key: string]: number\r\n}\r\n\r\nexport function checkWhichSetsAreEquipped(equipment: Equipment): SetsEquipped {\r\n  let equipmentTypes = Object.keys(equipment);\r\n  let equippedItems = equipmentTypes.map((x) => equipment[x as keyof Equipment]);\r\n  let setsEquipped = equippedItems.reduce((total: SetsEquipped, x) => {\r\n    if (x !== null && x.hasOwnProperty(\"set\") && x.set !== null) {\r\n      if (total.hasOwnProperty(x.set)) {\r\n        (total[x.set]) += 1;\r\n        return total;\r\n      } else {\r\n        total[x.set] = 1;\r\n        return total;\r\n      }\r\n    } else {\r\n      return total;\r\n    }\r\n  }, {});\r\n  return setsEquipped\r\n}\r\n","//Models\r\nimport { Equipment } from \"../store/equipment-reducer/equipment-reducer\";\r\n\r\n//Shared functionality\r\nimport { checkWhichSetsAreEquipped } from \"./check-which-sets-are-equipped\";\r\n\r\n//Data\r\nimport { itemSets } from \"../data/item-sets\";\r\n\r\nexport function calculateOtherProperties (equipment: Equipment) {\r\n  let setsEquipped = checkWhichSetsAreEquipped(equipment);\r\n  let propertiesOfSets = checkPropertiesOfSets(setsEquipped);\r\n  let propertiesOfEquippedItems = checkOtherPropertiesOfItems(equipment);\r\n  for (let property in propertiesOfSets) {\r\n    if (\r\n      propertiesOfSets.hasOwnProperty(property) &&\r\n      propertiesOfSets[property] !== 0\r\n    ) {\r\n      if (propertiesOfEquippedItems.hasOwnProperty(property)) {\r\n        propertiesOfEquippedItems[property] += propertiesOfSets[property];\r\n      } else {\r\n        propertiesOfEquippedItems[property] = propertiesOfSets[property];\r\n      }\r\n    }\r\n  }\r\n  return propertiesOfEquippedItems\r\n}\r\n\r\nfunction checkOtherPropertiesOfItems(equipment: Equipment) {\r\n    let equipmentTypes = Object.keys(equipment);\r\n    let equippedItems = equipmentTypes.map(\r\n      (x) => equipment[x as keyof Equipment]\r\n    );\r\n    let otherPropertiesOfEquippedItems = equippedItems.reduce(\r\n      (total: { [key: string]: number }, item) => {\r\n        if (\r\n          item !== null &&\r\n          (item.rarity === \"Psychorare\" || item.rarity === \"Epik\" || item.type === \"guild\") && item.psychoLvl\r\n        ) {\r\n          item.otherProperties.forEach((property) => {\r\n            if (total.hasOwnProperty(property[0])) {\r\n              total[property[0]] +=\r\n                property[1] + property[2] * (item.psychoLvl - 1);\r\n            } else {\r\n              total[property[0]] =\r\n                property[1] + property[2] * (item.psychoLvl - 1);\r\n            }\r\n          });\r\n          return total;\r\n        } else {\r\n          return total;\r\n        }\r\n      },\r\n      {}\r\n    );\r\n    return otherPropertiesOfEquippedItems;\r\n  }\r\n\r\n  function checkPropertiesOfSets(equippedSets: { [key: string]: number }) {\r\n    let setsProperties: { [key: string]: number } = {};\r\n    if (equippedSets) {\r\n      for (let setName in equippedSets) {\r\n        if (equippedSets.hasOwnProperty(setName)) {\r\n          let set = itemSets.find((x) => x.name === setName);\r\n          let setProperties = set!.getOtherPropertiesValuesDependingOnPiecesAsArray(\r\n            equippedSets[setName]\r\n          );\r\n          setProperties.forEach((property) => {\r\n            if (setsProperties.hasOwnProperty(property[0])) {\r\n              setsProperties[property[0]] += property[1];\r\n            } else {\r\n              setsProperties[property[0]] = property[1];\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n    return setsProperties;\r\n  }\r\n","//Shared functionality\r\nimport { checkWhichSetsAreEquipped } from \"./check-which-sets-are-equipped\";\r\n\r\n//Data\r\nimport { itemSets } from \"../data/item-sets\";\r\n\r\n//Types\r\nimport { Equipment } from \"../store/equipment-reducer/equipment-reducer\";\r\nimport { Item } from \"../data/models/item.model\";\r\n\r\n//calculating how much total of each stat equipment provides\r\nexport function calculateStatsFromItems(\r\n  equipment: Equipment,\r\n  level: number\r\n): StatsFromItems {\r\n  let equipmentTypes = Object.keys(equipment);\r\n  let equippedItems = equipmentTypes.map(\r\n    (x) => equipment[x as keyof Equipment]\r\n  );\r\n  //calculating stats from sets\r\n  let statsFromSets = calculateStateFromSets(equipment);\r\n  let equipmentStats = {\r\n    strength:\r\n      equippedItems.reduce(\r\n        (total, x) =>\r\n          x != null\r\n            ? (total += x.calculateTotalStat(\"strength\"))\r\n            : (total += 0),\r\n        0\r\n      ) + statsFromSets.strength,\r\n    agility:\r\n      equippedItems.reduce(\r\n        (total, x) =>\r\n          x != null ? (total += x.calculateTotalStat(\"agility\")) : (total += 0),\r\n        0\r\n      ) + statsFromSets.agility,\r\n    power:\r\n      equippedItems.reduce(\r\n        (total, x) =>\r\n          x != null ? (total += x.calculateTotalStat(\"power\")) : (total += 0),\r\n        0\r\n      ) + statsFromSets.power,\r\n    knowledge:\r\n      equippedItems.reduce(\r\n        (total, x) =>\r\n          x != null\r\n            ? (total += x.calculateTotalStat(\"knowledge\"))\r\n            : (total += 0),\r\n        0\r\n      ) + statsFromSets.knowledge,\r\n    hp:\r\n      equippedItems.reduce(\r\n        (total, x) =>\r\n          x != null ? (total += x.calculateTotalStat(\"hp\")) : (total += 0),\r\n        0\r\n      ) + statsFromSets.hp,\r\n    endurance:\r\n      equippedItems.reduce(\r\n        (total, x) =>\r\n          x != null\r\n            ? (total += x.calculateTotalStat(\"endurance\"))\r\n            : (total += 0),\r\n        0\r\n      ) + statsFromSets.endurance,\r\n    mana:\r\n      equippedItems.reduce(\r\n        (total, x) =>\r\n          x != null ? (total += x.calculateTotalStat(\"mana\")) : (total += 0),\r\n        0\r\n      ) + statsFromSets.mana,\r\n    damage: calculateTotalDamage(equipment.weapon, equipment.special, level),\r\n    fireRes: equippedItems.reduce(\r\n      (total, x) => (x != null ? (total += x.fireRes) : (total += 0)),\r\n      0\r\n    ),\r\n    frostRes: equippedItems.reduce(\r\n      (total, x) => (x != null ? (total += x.frostRes) : (total += 0)),\r\n      0\r\n    ),\r\n    energyRes: equippedItems.reduce(\r\n      (total, x) => (x != null ? (total += x.energyRes) : (total += 0)),\r\n      0\r\n    ),\r\n    curseRes: equippedItems.reduce(\r\n      (total, x) => (x != null ? (total += x.curseRes) : (total += 0)),\r\n      0\r\n    ),\r\n    pierceRes: equippedItems.reduce(\r\n      (total, x) => (x != null ? (total += x.pierceRes) : (total += 0)),\r\n      0\r\n    ),\r\n    cutRes: equippedItems.reduce(\r\n      (total, x) => (x != null ? (total += x.cutRes) : (total += 0)),\r\n      0\r\n    ),\r\n    bluntRes: equippedItems.reduce(\r\n      (total, x) => (x != null ? (total += x.bluntRes) : (total += 0)),\r\n      0\r\n    ),\r\n  };\r\n  return equipmentStats;\r\n}\r\n\r\n//calculating how much total of each stat item sets provide\r\nfunction calculateStateFromSets(equipment: Equipment): Stats {\r\n  let setsEquipped = checkWhichSetsAreEquipped(equipment);\r\n  let statsFromSets = {\r\n    hp: 0,\r\n    mana: 0,\r\n    endurance: 0,\r\n    strength: 0,\r\n    agility: 0,\r\n    power: 0,\r\n    knowledge: 0,\r\n  };\r\n  if (Object.keys(setsEquipped).length > 0) {\r\n    for (let key in setsEquipped) {\r\n      if (setsEquipped.hasOwnProperty(key)) {\r\n        let equippedSet = itemSets.find((x) => x.name === key);\r\n        let eqippedSetProperties = equippedSet!.getValuesDependingOnPieces(\r\n          setsEquipped[key]\r\n        );\r\n        statsFromSets.hp += eqippedSetProperties.hp;\r\n        statsFromSets.mana += eqippedSetProperties.mana;\r\n        statsFromSets.endurance += eqippedSetProperties.endurance;\r\n        statsFromSets.strength += eqippedSetProperties.strength;\r\n        statsFromSets.agility += eqippedSetProperties.agility;\r\n        statsFromSets.power += eqippedSetProperties.power;\r\n        statsFromSets.knowledge += eqippedSetProperties.knowledge;\r\n      }\r\n    }\r\n  }\r\n  return statsFromSets;\r\n}\r\n\r\nfunction calculateTotalDamage(\r\n  weapon: Item | null,\r\n  special: Item | null,\r\n  level: number\r\n) {\r\n  let totalDamage = 0;\r\n  if (weapon) {\r\n    totalDamage += weapon.calculateTotalDamage(level);\r\n  }\r\n  if (special) {\r\n    totalDamage += special.damage;\r\n  }\r\n  return totalDamage;\r\n}\r\n\r\ninterface Resists {\r\n  bluntRes: number;\r\n  cutRes: number;\r\n  pierceRes: number;\r\n  fireRes: number;\r\n  energyRes: number;\r\n  curseRes: number;\r\n  frostRes: number;\r\n}\r\n\r\ninterface Stats {\r\n  hp: number;\r\n  mana: number;\r\n  endurance: number;\r\n  strength: number;\r\n  agility: number;\r\n  power: number;\r\n  knowledge: number;\r\n}\r\n\r\ninterface StatsFromItems extends Resists, Stats {\r\n  damage: number;\r\n}\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Redux\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { RootState } from \"../../../../../../store/store\";\r\n\r\n//Models\r\nimport { Item } from \"../../../../../../data/models/item.model\";\r\n\r\n//Data\r\nimport { itemSets } from \"../../../../../../data/item-sets\";\r\n\r\n//Shared functionality\r\nimport { checkWhichSetsAreEquipped } from \"../../../../../../shared/check-which-sets-are-equipped\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedItemTooltip extends React.Component<PropTypes> {\r\n  nameColor(rarity: string): { color: string } {\r\n    let color = {\r\n      color: \"#0161E7\",\r\n    };\r\n    if (rarity === \"Psychorare\") {\r\n      color.color = \"#35CBEF\";\r\n    } else if (rarity === \"Set\") {\r\n      color.color = \"#3DEF01\";\r\n    } else if (rarity === \"Epik\") {\r\n      color.color = \"#E7CC00\";\r\n    }\r\n    return color;\r\n  }\r\n  render() {\r\n    const { t } = this.props;\r\n    let otherProperties = this.props.item\r\n      ? this.props.item.type === \"guild\"\r\n        ? this.props.item.otherProperties.map((x) => (\r\n            <p style={this.nameColor(\"Psychorare\")} key={x[0]}>\r\n              {t(x[0])}: {x[1] > 0 ? \"+\" : null}\r\n              {x[1]}%\r\n            </p>\r\n          ))\r\n        : this.props.item.otherProperties.map((x) => {\r\n            if (x[0] === \"Dodatkowe PA\") {\r\n              return (\r\n                <p\r\n                  style={\r\n                    this.props.item.psychoLvl\r\n                      ? this.nameColor(\"Psychorare\")\r\n                      : { color: \"gray\" }\r\n                  }\r\n                  key={x[0]}\r\n                >\r\n                  {t(x[0])}: {x[1]}\r\n                </p>\r\n              );\r\n            } else {\r\n              return (\r\n                <p\r\n                  style={\r\n                    this.props.item.psychoLvl\r\n                      ? this.nameColor(\"Psychorare\")\r\n                      : { color: \"gray\" }\r\n                  }\r\n                  key={x[0]}\r\n                >\r\n                  {t(x[0])}: {x[1] > 0 ? \"+\" : null}\r\n                  {x[1] + x[2] * (this.props.item.psychoLvl - 1)}% (\r\n                  {x[2] > 0 ? \"+\" : null}\r\n                  {x[2]}% {t(\"co poziom\")})\r\n                </p>\r\n              );\r\n            }\r\n          })\r\n      : null;\r\n    let notMeetingRequirements = {\r\n      color: \"red\",\r\n    };\r\n    let negativeStats = {\r\n      color: \"#961291\",\r\n    };\r\n    //If it's a set item\r\n    let setColor = {\r\n      color: \"#3DEF01\",\r\n    };\r\n    let equippedSet =\r\n      this.props.item && this.props.item.set\r\n        ? itemSets.find((x) => x.name === this.props.item.set)\r\n        : null;\r\n    let setProperties =\r\n      equippedSet && this.props.item.set\r\n        ? equippedSet.getValuesDependingOnPieces(\r\n            this.props.setsEquipped[this.props.item.set]\r\n          )\r\n        : null;\r\n    let otherSetProperties =\r\n      setProperties && setProperties.otherProperties\r\n        ? setProperties.otherProperties.map((x) => (\r\n            <p key={x} style={setColor}>\r\n              {x}\r\n            </p>\r\n          ))\r\n        : null;\r\n    return (\r\n      <div className=\"itemTooltip\" onClick={(event) => event.stopPropagation()}>\r\n        <p className=\"itemName\" style={this.nameColor(this.props.item.rarity)}>\r\n          {!this.props.item.isCustom\r\n            ? t(this.props.item.name)\r\n            : t(this.props.item.type + \"-count\", {\r\n                number: this.props.item.name.slice(-1),\r\n              })}\r\n        </p>\r\n        {this.props.item.set && equippedSet ? (\r\n          <p className=\"itemSet\" style={{ color: \"#3DEF01\" }}>\r\n            {t(\"Zestaw\")}: {t(this.props.item.set)} (\r\n            {this.props.setsEquipped[equippedSet.name]\r\n              ? this.props.setsEquipped[equippedSet.name]\r\n              : 0}\r\n            /{equippedSet.totalPieces})\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.randomStats ? (\r\n          <p className=\"starItem\">{t(\"Przedmiot gwiazdkowy\")}</p>\r\n        ) : null}\r\n        {this.props.item.name ? <hr /> : null}\r\n        {this.props.item.class ? (\r\n          <p\r\n            style={\r\n              this.props.item.class !== this.props.class\r\n                ? notMeetingRequirements\r\n                : undefined\r\n            }\r\n            className=\"itemClass\"\r\n          >\r\n            {t(\"req-class\")}: {t(this.props.item.class)}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.reqLvl && this.props.level ? (\r\n          <p\r\n            style={\r\n              this.props.item.reqLvl > this.props.level\r\n                ? notMeetingRequirements\r\n                : undefined\r\n            }\r\n            className=\"itemReq\"\r\n          >\r\n            {t(\"req-level\")}: {this.props.item.reqLvl}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.reqStr && this.props.strength ? (\r\n          <p\r\n            style={\r\n              this.props.item.reqStr > this.props.strength\r\n                ? notMeetingRequirements\r\n                : undefined\r\n            }\r\n            className=\"itemReq\"\r\n          >\r\n            {t(\"req-strength\")}: {this.props.item.reqStr}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.reqAgi && this.props.agility ? (\r\n          <p\r\n            style={\r\n              this.props.item.reqAgi > this.props.agility\r\n                ? notMeetingRequirements\r\n                : undefined\r\n            }\r\n            className=\"itemReq\"\r\n          >\r\n            {t(\"req-agility\")}: {this.props.item.reqAgi}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.reqPow && this.props.power ? (\r\n          <p\r\n            style={\r\n              this.props.item.reqPow > this.props.power\r\n                ? notMeetingRequirements\r\n                : undefined\r\n            }\r\n            className=\"itemReq\"\r\n          >\r\n            {t(\"req-power\")}: {this.props.item.reqPow}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.reqKno && this.props.knowledge ? (\r\n          <p\r\n            style={\r\n              this.props.item.reqKno > this.props.knowledge\r\n                ? notMeetingRequirements\r\n                : undefined\r\n            }\r\n            className=\"itemReq\"\r\n          >\r\n            {t(\"req-knowledge\")}: {this.props.item.reqKno}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.reqLvl > 0 ||\r\n        this.props.item.reqStr > 0 ||\r\n        this.props.item.reqAgi > 0 ||\r\n        this.props.item.reqPow > 0 ||\r\n        this.props.item.reqKno > 0 ? (\r\n          <hr />\r\n        ) : null}\r\n        {this.props.item.rarity === \"Psychorare\" ||\r\n        this.props.item.rarity === \"Epik\" ? (\r\n          this.props.item.psychoLvl ? (\r\n            <p className=\"itemProperty\" style={this.nameColor(\"Psychorare\")}>\r\n              {t(\"Poziom przedmiotu\")}: {this.props.item.psychoLvl}\r\n            </p>\r\n          ) : (\r\n            <p className=\"itemProperty\" style={{ color: \"red\" }}>\r\n              {t(\"Rozładowany\")}\r\n            </p>\r\n          )\r\n        ) : null}\r\n        {this.props.item.weaponType ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"Typ broni\")}: {t(this.props.item.weaponType)}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.damageType ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"Typ obrażeń\")}: {t(this.props.item.damageType)}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.damage ? (\r\n          <p className=\"damage\">\r\n            {t(\"Obrażenia\")}:{\" \"}\r\n            {this.props.level\r\n              ? this.props.item.calculateTotalDamage(this.props.level)\r\n              : this.props.item.calculateTotalDamage(0)}\r\n            {this.props.item.enhancements.damage ? (\r\n              <span style={{ color: \"orange\" }}>\r\n                {\" \"}\r\n                ({this.props.item.enhancements.damage > 0 ? \"+\" : null}\r\n                {this.props.item.enhancements.damage})\r\n              </span>\r\n            ) : null}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.calculateTotalStat(\"strength\") ||\r\n        this.props.item.strength ? (\r\n          <p\r\n            className=\"itemProperty\"\r\n            style={\r\n              this.props.item.calculateTotalStat(\"strength\") >= 0\r\n                ? undefined\r\n                : negativeStats\r\n            }\r\n          >\r\n            {t(\"strength\")}:{\" \"}\r\n            {this.props.item.calculateTotalStat(\"strength\") >= 0 ? \"+\" : null}\r\n            {this.props.item.calculateTotalStat(\"strength\")}\r\n            {this.props.item.enhancements.strength ? (\r\n              <span style={{ color: \"orange\" }}>\r\n                {\" \"}\r\n                ({this.props.item.enhancements.strength > 0 ? \"+\" : null}\r\n                {this.props.item.enhancements.strength})\r\n              </span>\r\n            ) : null}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.calculateTotalStat(\"agility\") ||\r\n        this.props.item.agility ? (\r\n          <p\r\n            className=\"itemProperty\"\r\n            style={\r\n              this.props.item.calculateTotalStat(\"agility\") >= 0\r\n                ? undefined\r\n                : negativeStats\r\n            }\r\n          >\r\n            {t(\"agility\")}:{\" \"}\r\n            {this.props.item.calculateTotalStat(\"agility\") >= 0 ? \"+\" : null}\r\n            {this.props.item.calculateTotalStat(\"agility\")}\r\n            {this.props.item.enhancements.agility ? (\r\n              <span style={{ color: \"orange\" }}>\r\n                {\" \"}\r\n                ({this.props.item.enhancements.agility > 0 ? \"+\" : null}\r\n                {this.props.item.enhancements.agility})\r\n              </span>\r\n            ) : null}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.calculateTotalStat(\"power\") ||\r\n        this.props.item.power ? (\r\n          <p\r\n            className=\"itemProperty\"\r\n            style={\r\n              this.props.item.calculateTotalStat(\"power\") >= 0\r\n                ? undefined\r\n                : negativeStats\r\n            }\r\n          >\r\n            {t(\"power\")}:{\" \"}\r\n            {this.props.item.calculateTotalStat(\"power\") >= 0 ? \"+\" : null}\r\n            {this.props.item.calculateTotalStat(\"power\")}\r\n            {this.props.item.enhancements.power ? (\r\n              <span style={{ color: \"orange\" }}>\r\n                {\" \"}\r\n                ({this.props.item.enhancements.power > 0 ? \"+\" : null}\r\n                {this.props.item.enhancements.power})\r\n              </span>\r\n            ) : null}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.calculateTotalStat(\"knowledge\") ||\r\n        this.props.item.knowledge ? (\r\n          <p\r\n            className=\"itemProperty\"\r\n            style={\r\n              this.props.item.calculateTotalStat(\"knowledge\") >= 0\r\n                ? undefined\r\n                : negativeStats\r\n            }\r\n          >\r\n            {t(\"knowledge\")}:{\" \"}\r\n            {this.props.item.calculateTotalStat(\"knowledge\") >= 0 ? \"+\" : null}\r\n            {this.props.item.calculateTotalStat(\"knowledge\")}\r\n            {this.props.item.enhancements.knowledge ? (\r\n              <span style={{ color: \"orange\" }}>\r\n                {\" \"}\r\n                ({this.props.item.enhancements.knowledge > 0 ? \"+\" : null}\r\n                {this.props.item.enhancements.knowledge})\r\n              </span>\r\n            ) : null}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.calculateTotalStat(\"hp\") || this.props.item.hp ? (\r\n          <p\r\n            className=\"itemProperty\"\r\n            style={\r\n              this.props.item.calculateTotalStat(\"hp\") >= 0\r\n                ? undefined\r\n                : negativeStats\r\n            }\r\n          >\r\n            {t(\"hp\")}:{\" \"}\r\n            {this.props.item.calculateTotalStat(\"hp\") >= 0 ? \"+\" : null}\r\n            {this.props.item.calculateTotalStat(\"hp\")}\r\n            {this.props.item.enhancements.hp ? (\r\n              <span style={{ color: \"orange\" }}>\r\n                {\" \"}\r\n                ({this.props.item.enhancements.hp > 0 ? \"+\" : null}\r\n                {this.props.item.enhancements.hp})\r\n              </span>\r\n            ) : null}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.calculateTotalStat(\"mana\") || this.props.item.mana ? (\r\n          <p\r\n            className=\"itemProperty\"\r\n            style={\r\n              this.props.item.calculateTotalStat(\"mana\") >= 0\r\n                ? undefined\r\n                : negativeStats\r\n            }\r\n          >\r\n            {t(\"mana\")}:{\" \"}\r\n            {this.props.item.calculateTotalStat(\"mana\") >= 0 ? \"+\" : null}\r\n            {this.props.item.calculateTotalStat(\"mana\")}\r\n            {this.props.item.enhancements.mana ? (\r\n              <span style={{ color: \"orange\" }}>\r\n                {\" \"}\r\n                ({this.props.item.enhancements.mana > 0 ? \"+\" : null}\r\n                {this.props.item.enhancements.mana})\r\n              </span>\r\n            ) : null}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.calculateTotalStat(\"endurance\") ||\r\n        this.props.item.endurance ? (\r\n          <p\r\n            className=\"itemProperty\"\r\n            style={\r\n              this.props.item.calculateTotalStat(\"endurance\") >= 0\r\n                ? undefined\r\n                : negativeStats\r\n            }\r\n          >\r\n            {t(\"endurance\")}:{\" \"}\r\n            {this.props.item.calculateTotalStat(\"endurance\") >= 0 ? \"+\" : null}\r\n            {this.props.item.calculateTotalStat(\"endurance\")}\r\n            {this.props.item.enhancements.endurance ? (\r\n              <span style={{ color: \"orange\" }}>\r\n                {\" \"}\r\n                ({this.props.item.enhancements.endurance > 0 ? \"+\" : null}\r\n                {this.props.item.enhancements.endurance})\r\n              </span>\r\n            ) : null}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.cutRes ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"cutRes\")}: +{this.props.item.cutRes}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.bluntRes ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"bluntRes\")}: +{this.props.item.bluntRes}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.pierceRes ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"pierceRes\")}: +{this.props.item.pierceRes}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.fireRes ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"fireRes\")}: +{this.props.item.fireRes}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.energyRes ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"energyRes\")}: +{this.props.item.energyRes}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.frostRes ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"frostRes\")}: +{this.props.item.frostRes}\r\n          </p>\r\n        ) : null}\r\n        {this.props.item.curseRes ? (\r\n          <p className=\"itemProperty\">\r\n            {t(\"curseRes\")}: +{this.props.item.curseRes}\r\n          </p>\r\n        ) : null}\r\n        {otherProperties}\r\n        {/* If it's a set item */}\r\n        {equippedSet ? (\r\n          <p className=\"itemProperty\" style={setColor}>\r\n            {t(\"Efekty zestawu\")}:\r\n          </p>\r\n        ) : null}\r\n        {equippedSet && equippedSet.strength && setProperties ? (\r\n          <p className=\"itemProperty\" style={setColor}>\r\n            {t(\"strength\")}: +{setProperties.strength} ({equippedSet.strength})\r\n          </p>\r\n        ) : null}\r\n        {equippedSet && equippedSet.agility && setProperties ? (\r\n          <p className=\"itemProperty\" style={setColor}>\r\n            {t(\"agility\")}: +{setProperties.agility} ({equippedSet.agility})\r\n          </p>\r\n        ) : null}\r\n        {equippedSet && equippedSet.power && setProperties ? (\r\n          <p className=\"itemProperty\" style={setColor}>\r\n            {t(\"power\")}: +{setProperties.power} ({equippedSet.power})\r\n          </p>\r\n        ) : null}\r\n        {equippedSet && equippedSet.knowledge && setProperties ? (\r\n          <p className=\"itemProperty\" style={setColor}>\r\n            {t(\"knowledge\")}: +{setProperties.knowledge} (\r\n            {equippedSet.knowledge})\r\n          </p>\r\n        ) : null}\r\n        {equippedSet && equippedSet.hp && setProperties ? (\r\n          <p className=\"itemProperty\" style={setColor}>\r\n            {t(\"hp\")}: +{setProperties.hp} ({equippedSet.hp})\r\n          </p>\r\n        ) : null}\r\n        {equippedSet && equippedSet.endurance && setProperties ? (\r\n          <p className=\"itemProperty\" style={setColor}>\r\n            {t(\"endurance\")}: +{setProperties.endurance} (\r\n            {equippedSet.endurance})\r\n          </p>\r\n        ) : null}\r\n        {equippedSet && equippedSet.mana && setProperties ? (\r\n          <p className=\"itemProperty\" style={setColor}>\r\n            {t(\"mana\")}: +{setProperties.mana} ({equippedSet.mana})\r\n          </p>\r\n        ) : null}\r\n        {equippedSet && equippedSet.otherProperties ? otherSetProperties : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n//Redux\r\nconst mapStateToProps = (state: RootState) => {\r\n  return {\r\n    setsEquipped: checkWhichSetsAreEquipped(state.equipment),\r\n  };\r\n};\r\n\r\nconst connector = connect(mapStateToProps);\r\n\r\nexport const ItemTooltip = withTranslation()(connector(ConnectedItemTooltip));\r\n\r\n//Types\r\ntype PropTypes = ConnectedProps<typeof connector> & OwnProps;\r\n\r\ninterface OwnProps {\r\n  item: Item;\r\n  class?: string;\r\n  level?: number;\r\n  strength?: number;\r\n  agility?: number;\r\n  power?: number;\r\n  knowledge?: number;\r\n  t(string: string, interpolation?: { [key: string]: string }): string;\r\n}\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Redux\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\n\r\n//Action creators\r\nimport {\r\n  enhanceItem,\r\n  Equipment,\r\n} from \"../../../../../../store/equipment-reducer/equipment-reducer\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedItemEnhancementForm extends React.Component<\r\n  PropTypes,\r\n  StateTypes\r\n> {\r\n  constructor(props: PropTypes) {\r\n    super(props);\r\n    this.state = {\r\n      properties: [\r\n        {\r\n          property: \"placeholder\",\r\n          value: 0,\r\n        },\r\n      ],\r\n      propertiesUsed: [],\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    this.addNewSelect = this.addNewSelect.bind(this);\r\n    this.enhanceItem = this.enhanceItem.bind(this);\r\n  }\r\n  //If item enhancements already exist\r\n  componentDidMount() {\r\n    let areEnhancementsPresent: boolean = false;\r\n    if (this.props.enhancements) {\r\n      for (const key in this.props.enhancements) {\r\n        if (this.props.enhancements.hasOwnProperty(key)) {\r\n          if (\r\n            this.props.enhancements &&\r\n            this.props.enhancements[key as keyof Enhancements] !== 0\r\n          ) {\r\n            areEnhancementsPresent = true;\r\n            this.setState((prevState) => {\r\n              let newState = { ...prevState };\r\n              newState.properties.push({\r\n                property: key,\r\n                value: this.props.enhancements![key as keyof Enhancements],\r\n              });\r\n              return newState;\r\n            });\r\n          }\r\n        }\r\n      }\r\n      if (areEnhancementsPresent) {\r\n        this.setState((prevState) => {\r\n          let newState = { ...prevState };\r\n          newState.properties.shift();\r\n          return newState;\r\n        });\r\n      }\r\n    }\r\n  }\r\n  //Creating a new item to add to the database\r\n  enhanceItem(): void {\r\n    let enhancements: Enhancements = {\r\n      strength: 0,\r\n      agility: 0,\r\n      power: 0,\r\n      knowledge: 0,\r\n      hp: 0,\r\n      mana: 0,\r\n      endurance: 0,\r\n      damage: 0,\r\n    };\r\n    if (!this.state.properties.every((x) => x.property === \"placeholder\")) {\r\n      //Fix the line below?\r\n      this.state.properties.forEach((x) => {\r\n        if (x.property !== \"placeholder\" && x.value !== null) {\r\n          enhancements[x.property as keyof Enhancements] = x.value;\r\n        }\r\n      });\r\n      this.props.enhanceItem(this.props.type, enhancements);\r\n      this.props.closeForm();\r\n    } else {\r\n      window.alert(this.props.t(\"Nie określono żadnych parametrów!\"));\r\n    }\r\n  }\r\n  //Needed to prevent bubbling\r\n  handleClick(event: React.FormEvent, functionToRun: () => void): void {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    functionToRun();\r\n  }\r\n  //Handling numeric inputs\r\n  handleChange(value: number, index: number): void {\r\n    this.setState((currentState) => {\r\n      let newState = { ...currentState };\r\n      newState.properties[index].value = value;\r\n      return newState;\r\n    });\r\n  }\r\n  //Handling selects\r\n  handleSelect(value: string, index: number): void {\r\n    this.setState((currentState) => {\r\n      let newState = { ...currentState };\r\n      newState.properties[index].property = value;\r\n      newState.propertiesUsed.push(value);\r\n      return newState;\r\n    });\r\n  }\r\n  //Adding a new line to the form\r\n  addNewSelect(): void {\r\n    this.setState((currentState) => {\r\n      let newState = { ...currentState };\r\n      newState.properties.push({\r\n        property: \"placeholder\",\r\n        value: null,\r\n      });\r\n      return newState;\r\n    });\r\n  }\r\n  removeSelect(index: number): void {\r\n    this.setState((currentState) => {\r\n      let newState = { ...currentState };\r\n      newState.properties.splice(index, 1);\r\n      return newState;\r\n    });\r\n  }\r\n  render() {\r\n    const { t } = this.props;\r\n    let closeButton = (\r\n      <button\r\n        className=\"closeList\"\r\n        onClick={(event) => this.handleClick(event, this.props.closeForm)}\r\n      >\r\n        ×\r\n      </button>\r\n    );\r\n    let properties =\r\n      this.props.type === \"weapon\"\r\n        ? [\r\n            \"strength\",\r\n            \"agility\",\r\n            \"power\",\r\n            \"knowledge\",\r\n            \"hp\",\r\n            \"mana\",\r\n            \"endurance\",\r\n            \"damage\",\r\n          ]\r\n        : [\r\n            \"strength\",\r\n            \"agility\",\r\n            \"power\",\r\n            \"knowledge\",\r\n            \"hp\",\r\n            \"mana\",\r\n            \"endurance\",\r\n          ];\r\n    let options = [\r\n      <option\r\n        key=\"placeholder\"\r\n        disabled\r\n        value=\"placeholder\"\r\n        className=\"placeholder\"\r\n      >\r\n        {t(\"Wybierz parametr\")}\r\n      </option>,\r\n    ];\r\n    properties.forEach((x) =>\r\n      options.push(\r\n        <option\r\n          key={x}\r\n          value={x}\r\n          disabled={this.state.propertiesUsed.includes(x)}\r\n        >\r\n          {t(x)}\r\n        </option>\r\n      )\r\n    );\r\n    let propertySelects = this.state.properties.map((x, index) => (\r\n      <div className=\"property\" key={index}>\r\n        <img src={\"images/\" + x.property + \".svg\"} alt={x.property} />\r\n        <select\r\n          required\r\n          value={x.property}\r\n          onChange={(event) =>\r\n            this.handleSelect(event.currentTarget.value, index)\r\n          }\r\n        >\r\n          {options}\r\n        </select>\r\n        <input\r\n          value={x.value ? x.value : undefined}\r\n          onChange={(event) =>\r\n            this.handleChange(+event.currentTarget.value, index)\r\n          }\r\n          placeholder={t(\"Wartość\")}\r\n          type=\"number\"\r\n          min={-999}\r\n          max={999}\r\n          disabled={this.state.properties[index].property === \"placeholder\"}\r\n        ></input>\r\n        <button\r\n          onClick={(event) => this.handleClick(event, this.addNewSelect)}\r\n          className=\"addProperty\"\r\n        ></button>\r\n        <button\r\n          onClick={(event) => {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            this.removeSelect(index);\r\n          }}\r\n          disabled={this.state.properties.length < 2}\r\n          className=\"removeProperty\"\r\n        ></button>\r\n      </div>\r\n    ));\r\n    return (\r\n      <form\r\n        onSubmit={(event) => this.handleClick(event, this.enhanceItem)}\r\n        className=\"itemsList addItemForm enhanceForm\"\r\n        onClick={(event) => {\r\n          event.stopPropagation();\r\n        }}\r\n        onMouseEnter={(event) => {\r\n          event.stopPropagation();\r\n        }}\r\n      >\r\n        <div className={\"title\"}>\r\n          <p>{t(\"change-stats-1\")}</p>\r\n          <p className=\"subtitle\">{t(\"change-stats-2\")}</p>\r\n        </div>\r\n        <div className={\"propertyList\"}>\r\n          {propertySelects}\r\n          <div className=\"submit\">\r\n            <button type=\"submit\">{t(\"Zatwierdź\")}</button>\r\n          </div>\r\n        </div>\r\n        {closeButton}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\n//Types\r\ntype PropTypes = ConnectedProps<typeof connector> & OwnProps;\r\n\r\ninterface OwnProps {\r\n  type: keyof Equipment;\r\n  enhancements: Enhancements | null;\r\n  closeForm(): void;\r\n  t(string: string): string;\r\n}\r\n\r\ninterface StateTypes {\r\n  properties: { property: string; value: number | null }[];\r\n  propertiesUsed: string[];\r\n}\r\n\r\ninterface Enhancements {\r\n  strength: number;\r\n  agility: number;\r\n  power: number;\r\n  knowledge: number;\r\n  hp: number;\r\n  mana: number;\r\n  endurance: number;\r\n  damage: number;\r\n}\r\n\r\n//Redux\r\nconst mapDispatchToProps = (dispatch: Dispatch) => {\r\n  return {\r\n    enhanceItem: (slot: keyof Equipment, enhancements: Enhancements) =>\r\n      dispatch(enhanceItem({ slot: slot, enhancements: enhancements })),\r\n  };\r\n};\r\n\r\nconst connector = connect(null, mapDispatchToProps);\r\n\r\nexport const ItemEnhancementForm = withTranslation()(\r\n  connector(ConnectedItemEnhancementForm)\r\n);\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Components\r\nimport { ItemTooltip } from \"../shared/ItemTooltip\";\r\n\r\n//Types\r\nimport { Item } from \"../../../../../../data/models/item.model\";\r\nimport { Equipment } from \"../../../../../../store/equipment-reducer/equipment-reducer\";\r\n\r\nexport class ItemComponent extends React.Component<PropTypes, StateTypes> {\r\n  constructor(props: PropTypes) {\r\n    super(props);\r\n    this.state = {\r\n      displayTooltip: false,\r\n    };\r\n  }\r\n  showTooltip() {\r\n    this.setState({\r\n      displayTooltip: true,\r\n    });\r\n  }\r\n  hideTooltip() {\r\n    this.setState({\r\n      displayTooltip: false,\r\n    });\r\n  }\r\n  render() {\r\n    let itemStyle = {\r\n      borderColor: \"#0161E7\",\r\n    };\r\n    let itemBackground = {backgroundImage: `url(\"images/items/` + this.props.item.image + `\")`}\r\n    if (this.props.item.rarity === \"Psychorare\") {\r\n      itemStyle.borderColor = \"#35CBEF\";\r\n    } else if (this.props.item.rarity === \"Set\") {\r\n      itemStyle.borderColor = \"#3DEF01\";\r\n    } else if (this.props.item.rarity === \"Epik\") {\r\n      itemStyle.borderColor = \"#E7CC00\";\r\n    }\r\n    if (!this.props.hasOwnProperty(\"equipItem\")) {\r\n      itemStyle.borderColor = \"red\";\r\n    }\r\n    return (\r\n      <div\r\n        className=\"itemOnList\"\r\n        style={itemStyle}\r\n        onMouseEnter={() => this.showTooltip()}\r\n        onMouseLeave={() => this.hideTooltip()}\r\n        onTouchStart={() => this.showTooltip()}\r\n        onTouchEnd={() => this.hideTooltip()}\r\n        onClick={(event) => {\r\n          event.stopPropagation();\r\n          if (\r\n            this.props.equipItem &&\r\n            this.props.hideItemsList &&\r\n            this.props.type\r\n          ) {\r\n            if (this.props.search) {\r\n              this.props.equipItem(this.props.item, this.props.type, true);\r\n            } else {\r\n              this.props.equipItem(this.props.item, this.props.type);\r\n            }\r\n\r\n            this.props.hideItemsList();\r\n          }\r\n        }}\r\n      >\r\n        {this.state.displayTooltip ? (\r\n          <ItemTooltip\r\n            item={this.props.item}\r\n            class={this.props.class}\r\n            level={this.props.level}\r\n            strength={this.props.strength}\r\n            agility={this.props.agility}\r\n            power={this.props.power}\r\n            knowledge={this.props.knowledge}\r\n          />\r\n        ) : null}\r\n        <div className=\"itemImage\" style={itemBackground}></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n//Types\r\ninterface PropTypes {\r\n  item: Item;\r\n  type?: keyof Equipment;\r\n  class: string;\r\n  level: number;\r\n  hideItemsList?(): void;\r\n  equipItem?(item: Item, slot: keyof Equipment, search?: boolean): void;\r\n  strength?: number;\r\n  agility?: number;\r\n  power?: number;\r\n  knowledge?: number;\r\n  search?: boolean;\r\n}\r\n\r\ninterface StateTypes {\r\n  displayTooltip: boolean;\r\n}\r\n","//React\r\nimport React from \"react\";\r\nimport ReactGA from \"react-ga\";\r\n\r\n//Redux\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\n\r\n//Action creators\r\nimport { addItem } from \"../../../../../../store/items-reducer/items-reducer\";\r\nimport {\r\n  equipItem,\r\n  Equipment,\r\n} from \"../../../../../../store/equipment-reducer/equipment-reducer\";\r\n\r\n//Models\r\nimport { Item, RawItem, ItemTypes } from \"../../../../../../data/models/item.model\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedItemCreatorForm extends React.Component<PropTypes, StateTypes> {\r\n  constructor(props: PropTypes) {\r\n    super(props);\r\n    this.state = {\r\n      properties: [\r\n        {\r\n          property: \"placeholder\",\r\n          value: null,\r\n        },\r\n      ],\r\n      propertiesUsed: [],\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    this.addNewSelect = this.addNewSelect.bind(this);\r\n    this.createItem = this.createItem.bind(this);\r\n  }\r\n  //Creating a new item to add to the database\r\n  createItem(): void {\r\n    let itemProperties: CustomItem = {\r\n      name: this.props.name,\r\n      image: this.props.type + \"color.svg\",\r\n      type: this.props.type === \"ring1\" || this.props.type === \"ring2\" ? \"ring\" : this.props.type,\r\n      strength: 0,\r\n      agility: 0,\r\n      power: 0,\r\n      knowledge: 0,\r\n      hp: 0,\r\n      mana: 0,\r\n      endurance: 0,\r\n      bluntRes: 0,\r\n      pierceRes: 0,\r\n      cutRes: 0,\r\n      fireRes: 0,\r\n      frostRes: 0,\r\n      curseRes: 0,\r\n      energyRes: 0,\r\n      isCustom: true,\r\n    };\r\n    if (\r\n      !this.state.properties.every((x) => x.property === \"placeholder\") &&\r\n      !this.state.properties.every((x) => x.value === 0)\r\n    ) {\r\n      //Fix the line below?\r\n      this.state.properties.forEach((x) => {\r\n        if (x.property !== \"placeholder\" && x.value !== null) {\r\n          (itemProperties[x.property as keyof CustomItem] as any) = x.value;\r\n        }\r\n      });\r\n      let createdItem = new Item(itemProperties)\r\n      ReactGA.event({\r\n        category: \"Items\",\r\n        action: \"Item Created\",\r\n        label: this.props.name,\r\n      });\r\n      this.props.addItem(createdItem);\r\n      this.props.equipItem(this.props.type as keyof Equipment, createdItem);\r\n      this.props.closeList();\r\n    } else {\r\n      window.alert(this.props.t(\"Nie określono żadnych parametrów!\"));\r\n    }\r\n  }\r\n  //Needed to prevent bubbling\r\n  handleClick(event: React.FormEvent, functionToRun: () => void): void {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    functionToRun();\r\n  }\r\n  //Handling numeric inputs\r\n  handleChange(value: number, index: number): void {\r\n    this.setState((currentState) => {\r\n      let newState = { ...currentState };\r\n      newState.properties[index].value = value;\r\n      return newState;\r\n    });\r\n  }\r\n  //Handling selects\r\n  handleSelect(value: string, index: number): void {\r\n    this.setState((currentState) => {\r\n      let newState = { ...currentState };\r\n      newState.properties[index].property = value;\r\n      newState.propertiesUsed.push(value);\r\n      return newState;\r\n    });\r\n  }\r\n  //Adding a new line to the form\r\n  addNewSelect(): void {\r\n    this.setState((currentState) => {\r\n      let newState = { ...currentState };\r\n      newState.properties.push({\r\n        property: \"placeholder\",\r\n        value: null,\r\n      });\r\n      return newState;\r\n    });\r\n  }\r\n  removeSelect(index: number): void {\r\n    this.setState((currentState) => {\r\n      let newState = { ...currentState };\r\n      newState.properties.splice(index, 1);\r\n      return newState;\r\n    });\r\n  }\r\n  render() {\r\n    const { t } = this.props\r\n    let closeButton = (\r\n      <button\r\n        className=\"closeList\"\r\n        onClick={(event) => this.handleClick(event, this.props.closeForm)}\r\n      >\r\n        ×\r\n      </button>\r\n    );\r\n    let properties = [\r\n      \"strength\",\r\n      \"agility\",\r\n      \"power\",\r\n      \"knowledge\",\r\n      \"hp\",\r\n      \"mana\",\r\n      \"endurance\",\r\n      \"cutRes\",\r\n      \"bluntRes\",\r\n      \"pierceRes\",\r\n      \"fireRes\",\r\n      \"energyRes\",\r\n      \"frostRes\",\r\n      \"curseRes\",\r\n    ];\r\n    if (this.props.type === \"weapon\") {\r\n      properties.push(\"damage\")\r\n    }\r\n    let options = [\r\n      <option\r\n        key=\"placeholder\"\r\n        disabled\r\n        value=\"placeholder\"\r\n        className=\"placeholder\"\r\n      >\r\n        {t(\"Wybierz parametr\")}\r\n      </option>\r\n    ];\r\n    properties.forEach((x) =>\r\n      options.push(\r\n        <option\r\n          key={x}\r\n          value={x}\r\n          disabled={this.state.propertiesUsed.includes(x)}\r\n        >\r\n          {t(x)}\r\n        </option>\r\n      )\r\n    );\r\n    let propertySelects = this.state.properties.map((x, index) => (\r\n      <div className=\"property\" key={index}>\r\n      <img src={\"images/\" + x.property + \".svg\"} alt={x.property}/>\r\n        <select\r\n          required\r\n          value={x.property}\r\n          onChange={(event) =>\r\n            this.handleSelect(event.currentTarget.value, index)\r\n          }\r\n        >\r\n          {options}\r\n        </select>\r\n        <input\r\n          value={x.value ? x.value : \"\"}\r\n          onChange={(event) =>\r\n            this.handleChange(+event.currentTarget.value, index)\r\n          }\r\n          placeholder={t(\"Wartość\")}\r\n          type=\"number\"\r\n          min={1}\r\n          max={999}\r\n          disabled={this.state.properties[index].property === \"placeholder\"}\r\n        ></input>\r\n        <button\r\n          onClick={(event) => this.handleClick(event, this.addNewSelect)}\r\n          className=\"addProperty\"\r\n        ></button>\r\n        <button\r\n          onClick={(event) => {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            this.removeSelect(index);\r\n          }}\r\n          disabled={this.state.properties.length < 2}\r\n          className=\"removeProperty\"\r\n        ></button>\r\n      </div>\r\n    ));\r\n    return (\r\n      <form\r\n        onSubmit={(event) => this.handleClick(event, this.createItem)}\r\n        className={\"itemsList addItemForm\"}\r\n      >\r\n        <div className={\"title\"}>\r\n          <p>{t(\"Stwórz własny przedmiot\")}</p>\r\n        </div>\r\n        <div className={\"propertyList\"}>\r\n          {propertySelects}\r\n          <div className=\"submit\">\r\n            <button type=\"submit\">{t(\"Zatwierdź\")}</button>\r\n          </div>\r\n        </div>\r\n        {closeButton}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\n//Types\r\ntype PropTypes = ConnectedProps<typeof connector> & OwnProps;\r\n\r\ninterface OwnProps {\r\n  name: string;\r\n  type: keyof Equipment;\r\n  closeForm(): void;\r\n  closeList(): void;\r\n  t(string: string): string;\r\n}\r\n\r\ninterface StateTypes {\r\n  properties: { property: string; value: number | null }[];\r\n  propertiesUsed: string[];\r\n}\r\n\r\ninterface CustomItem extends RawItem {\r\n  name: string;\r\n  type: ItemTypes;\r\n  image: string;\r\n  strength: number;\r\n  agility: number;\r\n  power: number;\r\n  knowledge: number;\r\n  hp: number;\r\n  mana: number;\r\n  endurance: number;\r\n  bluntRes: number;\r\n  pierceRes: number;\r\n  cutRes: number;\r\n  fireRes: number;\r\n  frostRes: number;\r\n  curseRes: number;\r\n  energyRes: number;\r\n  isCustom: true;\r\n}\r\n\r\n//Redux\r\nconst mapDispatchToProps = (dispatch: Dispatch) => {\r\n  return {\r\n    addItem: (item: Item) => dispatch(addItem({ item: item })),\r\n    equipItem: (slot: keyof Equipment, item: Item) =>\r\n      dispatch(equipItem({ slot: slot, item: item })),\r\n  };\r\n};\r\n\r\nconst connector = connect(null, mapDispatchToProps);\r\n\r\nexport const ItemCreatorForm = withTranslation()(connector(ConnectedItemCreatorForm));\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Components\r\nimport { ItemComponent } from \"./ItemComponent\"\r\nimport { ItemCreatorForm } from \"../shared/ItemCreatorForm\"\r\n\r\n//Types\r\nimport { Item } from \"../../../../../../data/models/item.model\"\r\nimport { Equipment } from \"../../../../../../store/equipment-reducer/equipment-reducer\"\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedItemsList extends React.Component<PropTypes, StateTypes> {\r\n  constructor(props: PropTypes) {\r\n    super(props)\r\n    this.state = {\r\n      displayAddItemForm: false\r\n    }\r\n    this.showAddItemForm = this.showAddItemForm.bind(this)\r\n    this.hideAddItemForm = this.hideAddItemForm.bind(this)\r\n  }\r\n  showAddItemForm() {\r\n    this.setState({\r\n      displayAddItemForm: true\r\n    })\r\n  }\r\n  hideAddItemForm() {\r\n    this.setState({\r\n      displayAddItemForm: false\r\n    })\r\n  }\r\n  render() {\r\n    const { t } = this.props\r\n    let closeButton = (\r\n      <button\r\n        className=\"closeList\"\r\n        onClick={event => {\r\n          event.stopPropagation();\r\n          this.props.hideItemsList()\r\n        }}\r\n      >\r\n        ×\r\n      </button>\r\n    );\r\n    let equippableItems = this.props.items.filter(\r\n      x =>\r\n        this.props.level >= x.reqLvl &&\r\n        this.props.strength >= x.reqStr &&\r\n        this.props.agility >= x.reqAgi &&\r\n        this.props.knowledge >= x.reqKno &&\r\n        this.props.power >= x.reqPow\r\n    );\r\n    let unequippableItems = this.props.items.filter(\r\n      x =>\r\n        this.props.level < x.reqLvl ||\r\n        this.props.strength < x.reqStr ||\r\n        this.props.agility < x.reqAgi ||\r\n        this.props.knowledge < x.reqKno ||\r\n        this.props.power < x.reqPow\r\n    );\r\n    let equippableItemsComponents = (\r\n      <div className={\"equippableItems\"}>\r\n        {equippableItems.map(x => (\r\n          <ItemComponent\r\n            key={x.name}\r\n            class={this.props.class}\r\n            type={this.props.type}\r\n            item={x}\r\n            level={this.props.level}\r\n            equipItem={this.props.equipItem}\r\n            hideItemsList={this.props.hideItemsList}\r\n          />\r\n        ))}\r\n        <div className=\"itemOnList addItem\" title={t(\"create-item\")} onClick={this.showAddItemForm}></div>\r\n      </div>\r\n    );\r\n    let unequippableItemsComponents = (\r\n      <div className={\"unequippableItems\"}>\r\n        {unequippableItems.map(x => (\r\n          <ItemComponent\r\n            key={x.name}\r\n            item={x}\r\n            class={this.props.class}\r\n            level={this.props.level}\r\n            strength={this.props.strength}\r\n            agility={this.props.agility}\r\n            power={this.props.power}\r\n            knowledge={this.props.knowledge}\r\n          />\r\n        ))}\r\n      </div>\r\n    );\r\n    return (\r\n      <div className=\"itemsList\">\r\n        {this.state.displayAddItemForm ? <ItemCreatorForm closeForm={this.hideAddItemForm} name={t(this.props.type) + \" \" + (this.props.items.filter(x => x.isCustom).length + 1)} type={this.props.type} closeList={this.props.hideItemsList} /> : null}\r\n        {this.props.items.length ? (\r\n          equippableItemsComponents\r\n        ) : (\r\n          <div className=\"notFound\">\r\n            <p className=\"notFoundMessage\">\r\n              {t(\"no-items\")}\r\n            </p>\r\n          </div>\r\n        )}\r\n        {this.props.items.length ? unequippableItemsComponents : null}\r\n        {closeButton}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const ItemsList = withTranslation()(ConnectedItemsList)\r\n\r\n//Types\r\ninterface PropTypes {\r\n  items: Item[]\r\n  type: keyof Equipment\r\n  class: string\r\n  level: number\r\n  strength: number\r\n  agility: number\r\n  power: number\r\n  knowledge: number\r\n  hideItemsList(): void\r\n  equipItem(item: Item, slot: keyof Equipment): void\r\n  t(string: string): string;\r\n}\r\n\r\ninterface StateTypes {\r\n  displayAddItemForm: boolean\r\n}\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Components\r\nimport { ItemTooltip } from \"./shared/ItemTooltip\";\r\nimport { ItemEnhancementForm } from \"./shared/ItemEnhancementForm\";\r\nimport { ItemsList } from \"./item-display/ItemsList\";\r\n\r\n//Types\r\nimport { Item } from \"../../../../../data/models/item.model\"\r\nimport { Equipment } from \"../../../../../store/equipment-reducer/equipment-reducer\"\r\n\r\n//Shared functionality\r\nimport isEquivalent from \"../../../../../shared/object-equivalency-check\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedItemSlot extends React.Component<PropTypes, StateTypes> {\r\n  constructor(props: PropTypes) {\r\n    super(props);\r\n    this.showTooltip = this.showTooltip.bind(this);\r\n    this.hideTooltip = this.hideTooltip.bind(this);\r\n    this.showForm = this.showForm.bind(this);\r\n    this.hideForm = this.hideForm.bind(this);\r\n    this.state = {\r\n      displayTooltip: false,\r\n      displayEnhancementForm: false,\r\n    };\r\n  }\r\n  componentDidUpdate(prevProps: PropTypes) {\r\n    if (this.props.inSlot && !isEquivalent(prevProps, this.props)) {\r\n      if (\r\n        this.props.level < this.props.inSlot.reqLvl ||\r\n        this.props.strength < this.props.inSlot.reqStr ||\r\n        this.props.agility < this.props.inSlot.reqAgi ||\r\n        this.props.knowledge < this.props.inSlot.reqKno ||\r\n        this.props.power < this.props.inSlot.reqPow\r\n      ) {\r\n        this.props.unequipItem(this.props.type);\r\n      }\r\n    }\r\n  }\r\n  hideTooltipWithListUp(\r\n    hideTip: () => void,\r\n    showList: (type: keyof Equipment) => void\r\n  ) {\r\n    hideTip();\r\n    showList(this.props.type);\r\n  }\r\n  showTooltip() {\r\n    if (!this.state.displayEnhancementForm) {\r\n      this.setState({\r\n        displayTooltip: true,\r\n      });\r\n    }\r\n  }\r\n  hideTooltip() {\r\n    this.setState({\r\n      displayTooltip: false,\r\n    });\r\n  }\r\n  showForm() {\r\n    this.setState({\r\n      displayTooltip: false,\r\n      displayEnhancementForm: true,\r\n    });\r\n  }\r\n  hideForm() {\r\n    this.setState({\r\n      displayEnhancementForm: false,\r\n    });\r\n  }\r\n  render() {\r\n    let unequipButton = (\r\n      <button\r\n        className={\"unequipButton\"}\r\n        onClick={(event) => {\r\n          event.stopPropagation()\r\n          this.setState({\r\n            displayTooltip: false,\r\n            displayEnhancementForm: false\r\n          })\r\n          this.props.unequipItem(this.props.type)\r\n        }\r\n        }\r\n      ></button>\r\n    );\r\n    let enhanceButton = (\r\n      <button\r\n        className=\"enhanceButton\"\r\n        title={this.props.t(\"Ulepsz przedmiot\")}\r\n        style={this.props.inSlot && (this.props.inSlot.enhancements.strength || this.props.inSlot.enhancements.agility || this.props.inSlot.enhancements.power || this.props.inSlot.enhancements.knowledge || this.props.inSlot.enhancements.hp || this.props.inSlot.enhancements.mana || this.props.inSlot.enhancements.endurance || this.props.inSlot.enhancements.damage) ? {backgroundImage: `url(\"/images/upgrade2.png\")`} : undefined}\r\n        onClick={(event) => {\r\n          event.stopPropagation()\r\n          this.showForm()\r\n        }}\r\n      ></button>\r\n    );\r\n    let addPsychoLvlButton = (\r\n      <button\r\n        className={\"addPsychoLvlButton\"}\r\n        disabled={this.props.inSlot && this.props.inSlot.psychoLvl === 8 ? true : false}\r\n        onClick={(event) => {\r\n          event.stopPropagation();\r\n          this.props.changePsychoLvl(this.props.type, 1)\r\n        }}\r\n      ></button>\r\n    )\r\n    let substractPsychoLvlButton = (\r\n      <button\r\n        className={\"substractPsychoLvlButton\"}\r\n        disabled={this.props.inSlot && this.props.inSlot.psychoLvl === 0 ? true : false}\r\n        onClick={(event) => {\r\n          event.stopPropagation();\r\n          this.props.changePsychoLvl(this.props.type, -1)\r\n        }}\r\n      ></button>\r\n    )\r\n    let noItemsWarning = (<div className=\"noItemsWarning\">!</div>)\r\n    return (\r\n      <div\r\n        className={\r\n          this.props.inSlot ? this.props.type + \" inSlot\" : this.props.type\r\n        }\r\n        onClick={() =>\r\n          this.hideTooltipWithListUp(\r\n            this.hideTooltip,\r\n            this.props.showItemsList\r\n          )\r\n        }\r\n        onMouseEnter={this.props.inSlot ? () => this.showTooltip() : undefined}\r\n        onMouseLeave={this.props.inSlot ? () => this.hideTooltip() : undefined}\r\n        onTouchStart={this.props.inSlot ? () => this.showTooltip() : undefined}\r\n        onTouchEnd={this.props.inSlot ? () => this.hideTooltip() : undefined}\r\n        style={\r\n          this.props.inSlot\r\n            ? {\r\n                backgroundImage:\r\n                  `url(\"/images/items/` + this.props.inSlot.image + '\")',\r\n              }\r\n            : undefined\r\n        }\r\n      >\r\n        {this.props.listToDisplay === this.props.type ? (\r\n          <ItemsList\r\n            items={this.props.items}\r\n            type={this.props.type}\r\n            class={this.props.class}\r\n            level={this.props.level}\r\n            strength={this.props.strength}\r\n            agility={this.props.agility}\r\n            power={this.props.power}\r\n            knowledge={this.props.knowledge}\r\n            hideItemsList={this.props.hideItemsList}\r\n            equipItem={this.props.equipItem}\r\n          />\r\n        ) : null}\r\n        {this.state.displayTooltip &&\r\n        !(this.props.listToDisplay === this.props.type) && this.props.inSlot ? (\r\n          <ItemTooltip\r\n            item={this.props.inSlot}\r\n            class={this.props.class}\r\n            level={this.props.level}\r\n            strength={this.props.strength}\r\n            agility={this.props.agility}\r\n            power={this.props.power}\r\n            knowledge={this.props.knowledge}\r\n          />\r\n        ) : null}\r\n        {this.props.inSlot ? unequipButton : null}\r\n        {this.props.inSlot ? enhanceButton : null}\r\n        {this.props.inSlot && (this.props.inSlot.rarity === \"Psychorare\" || this.props.inSlot.rarity === \"Epik\") ? addPsychoLvlButton : null}\r\n        {this.props.inSlot && (this.props.inSlot.rarity === \"Psychorare\" || this.props.inSlot.rarity === \"Epik\") ? substractPsychoLvlButton : null}\r\n        {this.props.items.length ? null : noItemsWarning}\r\n        {this.state.displayEnhancementForm ? (\r\n          <ItemEnhancementForm\r\n            type={this.props.type}\r\n            enhancements={this.props.inSlot ? this.props.inSlot.enhancements : null}\r\n            closeForm={this.hideForm}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const ItemSlot = withTranslation()(ConnectedItemSlot)\r\n\r\n//Types\r\ninterface PropTypes {\r\n  type: keyof Equipment\r\n  items: Item[]\r\n  inSlot: Item | null\r\n  class: string\r\n  level: number\r\n  strength: number\r\n  agility: number\r\n  power: number\r\n  knowledge: number\r\n  listToDisplay: string\r\n  equipItem(item: Item, slot: keyof Equipment): void\r\n  unequipItem(slot: keyof Equipment): void\r\n  showItemsList(type: keyof Equipment): void\r\n  hideItemsList(): void\r\n  changePsychoLvl(slot: keyof Equipment, value: number): void\r\n  t(string: string): string;\r\n}\r\n\r\ninterface StateTypes {\r\n  displayTooltip: boolean\r\n  displayEnhancementForm: boolean\r\n}\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Components\r\nimport { ItemTooltip } from \"./shared/ItemTooltip\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\n//Types\r\nimport { Item } from \"../../../../../data/models/item.model\";\r\n\r\nclass ConnecedSpecialSlot extends React.Component<PropTypes, StateTypes> {\r\n  constructor(props: PropTypes) {\r\n    super(props);\r\n    this.state = {\r\n      name: \"\",\r\n      image: \"\",\r\n      type: \"special\",\r\n      strength: 0,\r\n      agility: 0,\r\n      power: 0,\r\n      knowledge: 0,\r\n      hp: 0,\r\n      endurance: 0,\r\n      mana: 0,\r\n      damage: 0,\r\n      fireRes: 0,\r\n      frostRes: 0,\r\n      energyRes: 0,\r\n      curseRes: 0,\r\n      pierceRes: 0,\r\n      cutRes: 0,\r\n      bluntRes: 0,\r\n      displayTooltip: false,\r\n    };\r\n    this.hideTooltip = this.hideTooltip.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.hideTooltipWithListUp = this.hideTooltipWithListUp.bind(this);\r\n  }\r\n  createItem(properties: SpecialItemProperties) {\r\n    if (properties.image === \"\") {\r\n      properties.image = \"anvilcolor.svg\";\r\n    }\r\n    let specialItem = new Item(properties);\r\n    return this.props.equipItem(specialItem, \"special\");\r\n  }\r\n  hideTooltipWithListUp(\r\n    hideTip: () => void,\r\n    showList: (type: \"special\") => void\r\n  ) {\r\n    hideTip();\r\n    showList(this.props.type);\r\n  }\r\n  showTooltip() {\r\n    this.setState({\r\n      displayTooltip: true,\r\n    });\r\n  }\r\n  hideTooltip() {\r\n    this.setState({\r\n      displayTooltip: false,\r\n    });\r\n  }\r\n  handleSubmit(event: React.FormEvent) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    this.props.hideItemsList();\r\n    this.createItem(this.state);\r\n  }\r\n  handleChange(value: string | number, property: keyof SpecialItemProperties) {\r\n    this.setState((prevState) => {\r\n      let newState = { ...prevState };\r\n      //Fix the line below?\r\n      (newState[property as keyof SpecialItemProperties] as any) = value;\r\n      return newState;\r\n    });\r\n  }\r\n  render() {\r\n    const { t } = this.props\r\n    let unequipButton = (\r\n      <button\r\n        className={\"unequipButton\"}\r\n        onClick={(event: React.FormEvent) => {\r\n          this.setState({\r\n            name: \"\",\r\n            image: \"\",\r\n            type: \"special\",\r\n            strength: 0,\r\n            agility: 0,\r\n            power: 0,\r\n            knowledge: 0,\r\n            hp: 0,\r\n            endurance: 0,\r\n            mana: 0,\r\n            damage: 0,\r\n            fireRes: 0,\r\n            frostRes: 0,\r\n            energyRes: 0,\r\n            curseRes: 0,\r\n            pierceRes: 0,\r\n            cutRes: 0,\r\n            bluntRes: 0,\r\n            displayTooltip: false,\r\n          });\r\n          event.stopPropagation();\r\n          this.props.unequipItem(this.props.type);\r\n        }}\r\n      >\r\n        ×\r\n      </button>\r\n    );\r\n    let closeButton = (\r\n      <button\r\n        className=\"closeList\"\r\n        onClick={(event) => {\r\n          event.stopPropagation();\r\n          this.props.hideItemsList();\r\n        }}\r\n      >\r\n        ×\r\n      </button>\r\n    );\r\n    let properties = Object.keys(this.state);\r\n    let filteredProperties = properties.filter(\r\n      (x) =>\r\n        x !== \"displayTooltip\" && x !== \"name\" && x !== \"image\" && x !== \"type\"\r\n    );\r\n    let propertyInputs = filteredProperties.map((x) => (\r\n      <div key={x} className=\"property\">\r\n        <img src={\"images/\" + x + \".svg\"} alt={x}/>\r\n        <p>{t(x)}:</p>\r\n        <input\r\n          type=\"number\"\r\n          placeholder={t(x)}\r\n          value={\r\n            this.state[x as keyof SpecialItemProperties] === 0\r\n              ? \"\"\r\n              : this.state[x as keyof SpecialItemProperties]\r\n          }\r\n          onChange={(event) =>\r\n            this.handleChange(\r\n              parseInt(event.target.value),\r\n              x as keyof SpecialItemProperties\r\n            )\r\n          }\r\n        ></input>\r\n      </div>\r\n    ));\r\n    //upload obrazka?\r\n    return (\r\n      <div\r\n        className=\"special\"\r\n        title={t(\"Stwórz własny przedmiot\")}\r\n        onClick={() =>\r\n          this.hideTooltipWithListUp(\r\n            this.hideTooltip,\r\n            this.props.showItemsList\r\n          )\r\n        }\r\n        onMouseEnter={this.props.inSlot ? () => this.showTooltip() : undefined}\r\n        onMouseLeave={this.props.inSlot ? () => this.hideTooltip() : undefined}\r\n        onTouchStart={this.props.inSlot ? () => this.showTooltip() : undefined}\r\n        onTouchEnd={this.props.inSlot ? () => this.hideTooltip() : undefined}\r\n        style={\r\n          this.props.inSlot\r\n            ? {\r\n                backgroundImage:\r\n                  this.props.inSlot.image === \"anvilcolor.svg\"\r\n                    ? `url(\"/images/items/` + this.props.inSlot.image + `\")`\r\n                    : `url(\"` + this.props.inSlot.image + `\")`,\r\n              }\r\n            : undefined\r\n        }\r\n      >\r\n        {this.props.listToDisplay === this.props.type ? (\r\n          <div className={\"itemsList\"}>\r\n            <div className={\"title\"}>\r\n              <p>{t(\"Stwórz własny przedmiot\")}</p>\r\n            </div>\r\n            <form onSubmit={this.handleSubmit} className=\"propertyList\">\r\n              <div className=\"property\">\r\n                <p>{t(\"Nazwa\")}: </p>\r\n                <input\r\n                  className=\"textInput\"\r\n                  type=\"text\"\r\n                  maxLength={30}\r\n                  placeholder={t(\"Wpisz nazwę\")}\r\n                  value={this.state.name}\r\n                  onChange={(event) =>\r\n                    this.handleChange(event.target.value, \"name\")\r\n                  }\r\n                ></input>\r\n              </div>\r\n              <div className=\"property\">\r\n                <p>{t(\"image-url\")}: </p>\r\n                <input\r\n                  className=\"textInput\"\r\n                  type=\"text\"\r\n                  placeholder={t(\"Wklej adres obrazka\")}\r\n                  value={\r\n                    this.state.image === \"anvilcolor.svg\"\r\n                      ? \"\"\r\n                      : this.state.image\r\n                  }\r\n                  onChange={(event) =>\r\n                    this.handleChange(event.target.value, \"image\")\r\n                  }\r\n                ></input>\r\n              </div>\r\n              {propertyInputs}\r\n              <div className=\"submit\">\r\n                <input type=\"submit\" value={t(\"Zatwierdź\")}></input>\r\n              </div>\r\n            </form>\r\n            {closeButton}\r\n          </div>\r\n        ) : null}\r\n        {this.state.displayTooltip &&\r\n        !(this.props.listToDisplay === this.props.type) && this.props.inSlot ? (\r\n          <ItemTooltip item={this.props.inSlot} />\r\n        ) : null}\r\n        {this.props.inSlot ? unequipButton : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const SpecialSlot = withTranslation()(ConnecedSpecialSlot)\r\n\r\ninterface PropTypes {\r\n  type: \"special\"\r\n  inSlot: Item | null\r\n  listToDisplay: string\r\n  equipItem(item: Item, slot: \"special\"): void\r\n  unequipItem(slot: \"special\"): void\r\n  showItemsList(type: \"special\"): void\r\n  hideItemsList(): void\r\n  t(string: string): string;\r\n}\r\n\r\ninterface StateTypes extends SpecialItemProperties {\r\n  displayTooltip: boolean\r\n}\r\n\r\ninterface SpecialItemProperties {\r\n  name: string\r\n  image: string\r\n  type: \"special\"\r\n  strength: number\r\n  agility: number\r\n  power: number\r\n  knowledge: number\r\n  hp: number\r\n  endurance: number\r\n  mana: number\r\n  damage: number\r\n  fireRes: number\r\n  frostRes: number\r\n  energyRes: number\r\n  curseRes: number\r\n  pierceRes: number\r\n  cutRes: number\r\n  bluntRes: number\r\n}\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Models\r\nimport { Equipment } from \"../../../../../store/equipment-reducer/equipment-reducer\";\r\n\r\n//Shared functionality\r\nimport { calculateOtherProperties } from \"../../../../../shared/calculate-other-properties\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedPsychoSlot extends React.Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      showOtherProperties: false,\r\n    };\r\n  }\r\n  calculateOtherProperties(equipment: Equipment) {\r\n    const { t } = this.props\r\n    let propertiesOfEquippedItems = calculateOtherProperties(equipment);\r\n    let propertyTypes = Object.keys(propertiesOfEquippedItems);\r\n    let propertyParagraphs = propertyTypes.map((property) => {\r\n      if (property === \"Dodatkowe PA\" || property === \"Oszukać przeznaczenie\") {\r\n        return (\r\n          <p key={property}>\r\n            {t(property)}: {propertiesOfEquippedItems[property]}\r\n          </p>\r\n        );\r\n      } else {\r\n        return (\r\n          <p key={property}>\r\n            {t(property)}: {propertiesOfEquippedItems[property] > 0 ? \"+\" + propertiesOfEquippedItems[property] : propertiesOfEquippedItems[property]}%\r\n          </p>\r\n        );\r\n      }\r\n    });\r\n    return propertyParagraphs;\r\n  }\r\n  render() {\r\n    const { t } = this.props\r\n    let otherPropertiesTags = this.calculateOtherProperties(\r\n      this.props.equipment\r\n    );\r\n    let otherPropertiesList = (\r\n      <div className=\"itemTooltip\">\r\n        <p className=\"propertiesHeader\">{t(\"Dodatkowe właściwości\")}:</p>\r\n        {otherPropertiesTags}\r\n      </div>\r\n    );\r\n    return (\r\n      <div\r\n        className=\"otherProperties\"\r\n        onMouseEnter={() => this.setState({ showOtherProperties: true })}\r\n        onTouchStart={() => this.setState({ showOtherProperties: true })}\r\n        onMouseLeave={() => this.setState({ showOtherProperties: false })}\r\n        onTouchEnd={() => this.setState({ showOtherProperties: false })}\r\n        style={\r\n          otherPropertiesTags.length !== 0\r\n            ? { backgroundImage: \"url(/images/other-properties-active.svg)\" }\r\n            : undefined\r\n        }\r\n      >\r\n        {this.state.showOtherProperties && otherPropertiesTags.length !== 0 ? (\r\n          otherPropertiesList\r\n        ) : this.state.showOtherProperties ? (\r\n          <div className=\"itemTooltip\">\r\n            <p className=\"noProperties\">{t(\"psycho-summary\")}</p>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const PsychoSlot = withTranslation()(ConnectedPsychoSlot)\r\n\r\n//Types\r\ninterface Props {\r\n  equipment: Equipment;\r\n  t(string: string): string;\r\n}\r\n\r\ninterface State {\r\n  showOtherProperties: boolean;\r\n}\r\n","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","//React\r\nimport React from \"react\";\r\nimport ReactGA from \"react-ga\";\r\n\r\n//Redux\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\nimport { RootState } from \"../../../../../../store/store\";\r\n\r\n//Action creators\r\nimport {\r\n  equipItem,\r\n  unequipItem,\r\n  Equipment,\r\n} from \"../../../../../../store/equipment-reducer/equipment-reducer\";\r\n\r\n//Models\r\nimport {\r\n  Item,\r\n  RawItem,\r\n  ItemTypes,\r\n} from \"../../../../../../data/models/item.model\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedGuildBuffsForm extends React.Component<PropTypes, StateTypes> {\r\n  constructor(props: PropTypes) {\r\n    super(props);\r\n    this.state = {\r\n      templeLevel: 1,\r\n      properties: {\r\n        strength: false,\r\n        agility: false,\r\n        power: false,\r\n        knowledge: false,\r\n        hp: false,\r\n        mana: false,\r\n        endurance: false,\r\n        fireRes: false,\r\n        energyRes: false,\r\n        frostRes: false,\r\n        curseRes: false,\r\n        physRes: false,\r\n        manaUsage: false,\r\n        enduranceUsage: false,\r\n        regeneration: false,\r\n      },\r\n    };\r\n    this.createItem = this.createItem.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    let properties = [\r\n      \"strength\",\r\n      \"agility\",\r\n      \"power\",\r\n      \"knowledge\",\r\n      \"hp\",\r\n      \"mana\",\r\n      \"endurance\",\r\n      \"cutRes\",\r\n      \"fireRes\",\r\n      \"energyRes\",\r\n      \"frostRes\",\r\n      \"curseRes\",\r\n    ];\r\n    if (this.props.item) {\r\n      this.setState({\r\n        templeLevel: this.props.item.psychoLvl,\r\n      });\r\n      properties.forEach((property) => {\r\n        if (\r\n          this.props.item![property as keyof Item] !== 0 &&\r\n          property !== \"cutRes\"\r\n        ) {\r\n          this.setState((prevState) => {\r\n            let newState = { ...prevState };\r\n            newState.properties[property] = true;\r\n            return newState;\r\n          });\r\n        } else if (\r\n          this.props.item![property as keyof Item] !== 0 &&\r\n          property === \"cutRes\"\r\n        ) {\r\n          this.setState((prevState) => {\r\n            let newState = { ...prevState };\r\n            newState.properties.physRes = true;\r\n            return newState;\r\n          });\r\n        }\r\n      });\r\n      this.props.item.otherProperties.forEach((property) => {\r\n        if (property[0] === \"Zużycie many\") {\r\n          this.setState((prevState) => {\r\n            let newState = { ...prevState };\r\n            newState.properties.manaUsage = true;\r\n            return newState;\r\n          });\r\n        } else if (property[0] === \"Zużycie kondycji\") {\r\n          this.setState((prevState) => {\r\n            let newState = { ...prevState };\r\n            newState.properties.enduranceUsage = true;\r\n            return newState;\r\n          });\r\n        } else if (property[0] === \"Regeneracja many\") {\r\n          this.setState((prevState) => {\r\n            let newState = { ...prevState };\r\n            newState.properties.regeneration = true;\r\n            return newState;\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps: PropTypes, prevState: StateTypes) {\r\n    if (prevState.templeLevel !== this.state.templeLevel) {\r\n      if (this.state.templeLevel < 5) {\r\n        this.setState((prevState) => {\r\n          let newState = { ...prevState };\r\n          newState.properties.manaUsage = false;\r\n          newState.properties.enduranceUsage = false;\r\n          newState.properties.regeneration = false;\r\n          return newState;\r\n        });\r\n      }\r\n      if (this.state.templeLevel < 4) {\r\n        this.setState((prevState) => {\r\n          let newState = { ...prevState };\r\n          newState.properties.physRes = false;\r\n          return newState;\r\n        });\r\n      }\r\n      if (this.state.templeLevel < 3) {\r\n        this.setState((prevState) => {\r\n          let newState = { ...prevState };\r\n          newState.properties.fireRes = false;\r\n          newState.properties.frostRes = false;\r\n          newState.properties.energyRes = false;\r\n          newState.properties.curseRes = false;\r\n          return newState;\r\n        });\r\n      }\r\n      if (this.state.templeLevel < 2) {\r\n        this.setState((prevState) => {\r\n          let newState = { ...prevState };\r\n          newState.properties.hp = false;\r\n          newState.properties.mana = false;\r\n          newState.properties.endurance = false;\r\n          return newState;\r\n        });\r\n      }\r\n    }\r\n  }\r\n  checkIfBoxShouldBeDisabled(property?: string): boolean {\r\n    //check if 3 buffs are already chosen\r\n    let buffs = Object.keys(this.state.properties);\r\n    let areThreeBuffsUsed = buffs.reduce(\r\n      (accum, buff) => (this.state.properties[buff] ? (accum += 1) : accum),\r\n      0\r\n    );\r\n    if (areThreeBuffsUsed >= 3) {\r\n      return true;\r\n    }\r\n    let isTempleHighEnoughLevel = property\r\n      ? property === \"strength\" ||\r\n        property === \"agility\" ||\r\n        property === \"power\" ||\r\n        property === \"knowledge\"\r\n        ? false\r\n        : (property === \"hp\" ||\r\n            property === \"mana\" ||\r\n            property === \"endurance\") &&\r\n          this.state.templeLevel > 1\r\n        ? false\r\n        : (property === \"fireRes\" ||\r\n            property === \"energyRes\" ||\r\n            property === \"curseRes\" ||\r\n            property === \"frostRes\") &&\r\n          this.state.templeLevel > 2\r\n        ? false\r\n        : property === \"physRes\" && this.state.templeLevel > 3\r\n        ? false\r\n        : this.state.templeLevel > 4\r\n        ? false\r\n        : true\r\n      : false;\r\n    if (isTempleHighEnoughLevel) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  calculateBuffValue(attribute: string): number {\r\n    let maxAttrValue =\r\n      attribute === \"strength\" ||\r\n      attribute === \"agility\" ||\r\n      attribute === \"power\" ||\r\n      attribute === \"knowledge\"\r\n        ? 20\r\n        : attribute === \"hp\" ||\r\n          attribute === \"mana\" ||\r\n          attribute === \"endurance\"\r\n        ? 200\r\n        : attribute === \"manaUsage\" || attribute === \"enduranceUsage\"\r\n        ? 10\r\n        : attribute === \"regeneration\"\r\n        ? 1\r\n        : attribute === \"physRes\"\r\n        ? 20\r\n        : 40;\r\n    // if ((attribute === \"fireRes\" || attribute === \"curseRes\" || attribute === \"frostRes\" || attribute === \"energyRes\") ) {\r\n    //\r\n    // }\r\n    switch (true) {\r\n      case this.props.level < 10:\r\n        return 0;\r\n      case this.props.level < 20:\r\n        return maxAttrValue * 0.1;\r\n      case this.props.level < 30:\r\n        return maxAttrValue * 0.2;\r\n      case this.props.level < 40:\r\n        return maxAttrValue * 0.3;\r\n      case this.props.level < 50:\r\n        return maxAttrValue * 0.4;\r\n      case this.props.level < 60:\r\n        return maxAttrValue * 0.5;\r\n      case this.props.level < 70:\r\n        switch (true) {\r\n          case this.state.templeLevel === 1:\r\n            return maxAttrValue * 0.5;\r\n          default:\r\n            return maxAttrValue * 0.6;\r\n        }\r\n      case this.props.level < 80:\r\n        switch (true) {\r\n          case this.state.templeLevel < 3:\r\n            return maxAttrValue * (0.5 + (this.state.templeLevel - 1) * 0.1);\r\n          default:\r\n            return maxAttrValue * 0.7;\r\n        }\r\n      case this.props.level < 90:\r\n        switch (true) {\r\n          case this.state.templeLevel < 4:\r\n            return maxAttrValue * (0.5 + (this.state.templeLevel - 1) * 0.1);\r\n          default:\r\n            return maxAttrValue * 0.8;\r\n        }\r\n      case this.props.level < 100:\r\n        switch (true) {\r\n          case this.state.templeLevel < 5:\r\n            return maxAttrValue * (0.5 + (this.state.templeLevel - 1) * 0.1);\r\n          default:\r\n            return maxAttrValue * 0.9;\r\n        }\r\n      default:\r\n        return maxAttrValue * (0.5 + (this.state.templeLevel - 1) * 0.1);\r\n    }\r\n  }\r\n  createItem(): void {\r\n    let guildBuffs: GuildBuffs = {\r\n      name: \"Buffy gildiowe\",\r\n      image: \"\",\r\n      type: \"guild\",\r\n      psychoLvl: this.state.templeLevel,\r\n      strength: 0,\r\n      agility: 0,\r\n      power: 0,\r\n      knowledge: 0,\r\n      hp: 0,\r\n      mana: 0,\r\n      endurance: 0,\r\n      bluntRes: 0,\r\n      pierceRes: 0,\r\n      cutRes: 0,\r\n      fireRes: 0,\r\n      frostRes: 0,\r\n      curseRes: 0,\r\n      energyRes: 0,\r\n      otherProperties: [],\r\n    };\r\n    let properties = Object.keys(this.state.properties);\r\n    properties.forEach((property) => {\r\n      if (this.state.properties[property]) {\r\n        if (property === \"manaUsage\" && this.calculateBuffValue(property)) {\r\n          guildBuffs.otherProperties.push([\r\n            \"Zużycie many\",\r\n            -this.calculateBuffValue(property),\r\n            0,\r\n          ]);\r\n        } else if (\r\n          property === \"enduranceUsage\" &&\r\n          this.calculateBuffValue(property)\r\n        ) {\r\n          guildBuffs.otherProperties.push([\r\n            \"Zużycie kondycji\",\r\n            -this.calculateBuffValue(property),\r\n            0,\r\n          ]);\r\n        } else if (\r\n          property === \"regeneration\" &&\r\n          this.calculateBuffValue(property)\r\n        ) {\r\n          guildBuffs.otherProperties.push([\r\n            \"Regeneracja many\",\r\n            this.calculateBuffValue(property),\r\n            0,\r\n          ]);\r\n          guildBuffs.otherProperties.push([\r\n            \"Regeneracja kondycji\",\r\n            this.calculateBuffValue(property),\r\n            0,\r\n          ]);\r\n        } else if (property === \"physRes\") {\r\n          guildBuffs.bluntRes = this.calculateBuffValue(property);\r\n          guildBuffs.pierceRes = this.calculateBuffValue(property);\r\n          guildBuffs.cutRes = this.calculateBuffValue(property);\r\n        } else {\r\n          //Fix the line below?\r\n          (guildBuffs[\r\n            property as keyof GuildBuffs\r\n          ] as any) = this.calculateBuffValue(property);\r\n        }\r\n      }\r\n    });\r\n    let createdItem = new Item(guildBuffs);\r\n    ReactGA.event({\r\n      category: \"Items\",\r\n      action: \"Buffy gildiowe\",\r\n      label: \"Buffy gildiowe\",\r\n    });\r\n    this.props.equipItem(\"guild\", createdItem);\r\n    this.props.closeList();\r\n  }\r\n  //Needed to prevent bubbling\r\n  handleClick(event: React.FormEvent, functionToRun: () => void): void {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    functionToRun();\r\n  }\r\n  render() {\r\n    const { t } = this.props;\r\n    let closeButton = (\r\n      <button\r\n        className=\"closeList\"\r\n        onClick={(event) => this.handleClick(event, this.props.closeList)}\r\n      >\r\n        ×\r\n      </button>\r\n    );\r\n    let properties = Object.keys(this.state.properties);\r\n    let checkBoxes = properties.map((property) => (\r\n      <div key={property} className=\"filterLine\">\r\n        <img\r\n          src={\"images/\" + property + \".svg\"}\r\n          alt={property}\r\n          onClick={() =>\r\n            !this.checkIfBoxShouldBeDisabled(property) ||\r\n            this.state.properties[property]\r\n              ? this.state.properties[property]\r\n                ? this.setState((prevState) => {\r\n                    let newState = { ...prevState };\r\n                    newState.properties[property] = false;\r\n                    return newState;\r\n                  })\r\n                : this.setState((prevState) => {\r\n                    let newState = { ...prevState };\r\n                    newState.properties[property] = true;\r\n                    return newState;\r\n                  })\r\n              : null\r\n          }\r\n        />\r\n        <input\r\n          type=\"checkbox\"\r\n          className=\"filterInput\"\r\n          name={property}\r\n          value={property}\r\n          onChange={() =>\r\n            this.state.properties[property]\r\n              ? this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  newState.properties[property] = false;\r\n                  return newState;\r\n                })\r\n              : this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  newState.properties[property] = true;\r\n                  return newState;\r\n                })\r\n          }\r\n          checked={this.state.properties[property]}\r\n          disabled={\r\n            this.state.properties[property]\r\n              ? false\r\n              : this.checkIfBoxShouldBeDisabled(property)\r\n          }\r\n        />\r\n        <label\r\n          htmlFor={property}\r\n          onClick={() =>\r\n            !this.checkIfBoxShouldBeDisabled(property) ||\r\n            this.state.properties[property]\r\n              ? this.state.properties[property]\r\n                ? this.setState((prevState) => {\r\n                    let newState = { ...prevState };\r\n                    newState.properties[property] = false;\r\n                    return newState;\r\n                  })\r\n                : this.setState((prevState) => {\r\n                    let newState = { ...prevState };\r\n                    newState.properties[property] = true;\r\n                    return newState;\r\n                  })\r\n              : null\r\n          }\r\n        >\r\n          {t(property)}\r\n        </label>\r\n      </div>\r\n    ));\r\n    let resetButton = (\r\n      <button\r\n        className=\"resetFilters\"\r\n        onClick={(event) => {\r\n          event.preventDefault();\r\n          this.props.unequipItem(\"guild\");\r\n          this.setState({\r\n            templeLevel: 1,\r\n            properties: {\r\n              strength: false,\r\n              agility: false,\r\n              power: false,\r\n              knowledge: false,\r\n              hp: false,\r\n              mana: false,\r\n              endurance: false,\r\n              fireRes: false,\r\n              energyRes: false,\r\n              frostRes: false,\r\n              curseRes: false,\r\n              physRes: false,\r\n              manaUsage: false,\r\n              enduranceUsage: false,\r\n              regeneration: false,\r\n            },\r\n          });\r\n        }}\r\n      >\r\n        {t(\"Resetuj\")}\r\n      </button>\r\n    );\r\n    return (\r\n      <form\r\n        onSubmit={(event) => this.handleClick(event, this.createItem)}\r\n        className=\"itemsList filtersForm\"\r\n      >\r\n        <div className=\"title\">\r\n          <p>{t(\"Dodaj buffy gildiowe\")}</p>\r\n        </div>\r\n        <div className=\"templeLevel\">\r\n          <img src={\"images/temple.svg\"} alt=\"temple\" />\r\n          <label>{t(\"Poziom świątyni\")}:</label>\r\n          <div className=\"templeRange\">\r\n            <div\r\n              className=\"templeValue\"\r\n              style={{ left: this.state.templeLevel - 1 + \"em\" }}\r\n            >\r\n              <div className=\"value\">{this.state.templeLevel}</div>\r\n            </div>\r\n            <input\r\n              type=\"range\"\r\n              name=\"temple\"\r\n              min={1}\r\n              max={6}\r\n              value={this.state.templeLevel}\r\n              onChange={(event) =>\r\n                this.setState({ templeLevel: +event.currentTarget.value })\r\n              }\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={\"filterLines\"}>{checkBoxes}</div>\r\n        {/*this.checkIfBoxShouldBeDisabled() ? <span>Wybrano już 3 buffy!</span> : null*/}\r\n        <div className=\"submit\">\r\n          <button type=\"submit\" className=\"submitButton\">{t(\"Zatwierdź\")}</button>\r\n          {resetButton}\r\n        </div>\r\n        {closeButton}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\n//Types\r\ntype PropTypes = ConnectedProps<typeof connector> & OwnProps;\r\n\r\ninterface OwnProps {\r\n  closeList(): void;\r\n  t(string: string): string;\r\n}\r\n\r\ninterface StateTypes {\r\n  templeLevel: number;\r\n  properties: {\r\n    strength: boolean;\r\n    agility: boolean;\r\n    power: boolean;\r\n    knowledge: boolean;\r\n    hp: boolean;\r\n    mana: boolean;\r\n    endurance: boolean;\r\n    physRes: boolean;\r\n    fireRes: boolean;\r\n    energyRes: boolean;\r\n    frostRes: boolean;\r\n    curseRes: boolean;\r\n    manaUsage: boolean;\r\n    enduranceUsage: boolean;\r\n    regeneration: boolean;\r\n    [index: string]: boolean;\r\n  };\r\n}\r\n\r\ninterface GuildBuffs extends RawItem {\r\n  name: string;\r\n  type: ItemTypes;\r\n  psychoLvl: number;\r\n  strength: number;\r\n  agility: number;\r\n  power: number;\r\n  knowledge: number;\r\n  hp: number;\r\n  mana: number;\r\n  endurance: number;\r\n  bluntRes: number;\r\n  pierceRes: number;\r\n  cutRes: number;\r\n  fireRes: number;\r\n  frostRes: number;\r\n  curseRes: number;\r\n  energyRes: number;\r\n  otherProperties: [string, number, number][];\r\n}\r\n\r\n//Redux\r\nconst mapStateToProps = (state: RootState) => {\r\n  return {\r\n    item: state.equipment.guild,\r\n    level: state.character.level,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => {\r\n  return {\r\n    unequipItem: (slot: keyof Equipment) =>\r\n      dispatch(unequipItem({ slot: slot })),\r\n    equipItem: (slot: keyof Equipment, item: Item) =>\r\n      dispatch(equipItem({ slot: slot, item: item })),\r\n  };\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport const GuildBuffsForm = withTranslation()(\r\n  connector(ConnectedGuildBuffsForm)\r\n);\r\n","//React\r\nimport React, { useState } from \"react\";\r\n\r\n//components\r\nimport { GuildBuffsForm } from \"./shared/GuildBuffsForm\";\r\nimport { ItemTooltip } from \"./shared/ItemTooltip\";\r\n\r\n//types\r\nimport { Item } from \"../../../../../data/models/item.model\";\r\nimport { Equipment } from \"../../../../../store/equipment-reducer/equipment-reducer\";\r\n\r\nexport function GuildSlot(props: Props) {\r\n  const [tooltip, toggleTooltip] = useState(false);\r\n  return (\r\n    <div\r\n      className=\"guild empty\"\r\n      onClick={() => props.showItemsList(\"guild\")}\r\n      onMouseEnter={() => toggleTooltip(true)}\r\n      onMouseLeave={() => toggleTooltip(false)}\r\n      onTouchStart={() => toggleTooltip(true)}\r\n      onTouchEnd={() => toggleTooltip(false)}\r\n      style={\r\n        props.inSlot\r\n          ? { backgroundImage: `url(\"/images/guild-color.svg\")` }\r\n          : undefined\r\n      }\r\n    >\r\n      {props.listToDisplay === \"guild\" ? (\r\n        <GuildBuffsForm closeList={props.hideItemsList} />\r\n      ) : tooltip && props.inSlot ? (\r\n        <ItemTooltip item={props.inSlot} />\r\n      ) : tooltip ? (\r\n        <div className=\"itemTooltip\">\r\n          <p className=\"noProperties\">{props.t(\"Buffy gildiowe\")}</p>\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface Props {\r\n  inSlot: Item | null;\r\n  listToDisplay: string;\r\n  showItemsList(type: keyof Equipment): void;\r\n  hideItemsList(): void;\r\n  t(string: string): string;\r\n}\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Components\r\nimport { ItemComponent } from \"./ItemComponent\";\r\n\r\n//Types\r\nimport { Item } from \"../../../../../../data/models/item.model\";\r\nimport { Equipment } from \"../../../../../../store/equipment-reducer/equipment-reducer\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedItemsSearchList extends React.Component<PropTypes, StateTypes> {\r\n  render() {\r\n    let closeButton = (\r\n      <button\r\n        className=\"closeList\"\r\n        onClick={(event) => {\r\n          event.stopPropagation();\r\n          this.props.hideItemsList();\r\n        }}\r\n      >\r\n        ×\r\n      </button>\r\n    );\r\n    let equippableItems = this.props.items.filter(\r\n      (x) =>\r\n        this.props.level >= x.reqLvl &&\r\n        this.props.strength >= x.reqStr &&\r\n        this.props.agility >= x.reqAgi &&\r\n        this.props.knowledge >= x.reqKno &&\r\n        this.props.power >= x.reqPow\r\n    );\r\n    let unequippableItems = this.props.items.filter(\r\n      (x) =>\r\n        this.props.level < x.reqLvl ||\r\n        this.props.strength < x.reqStr ||\r\n        this.props.agility < x.reqAgi ||\r\n        this.props.knowledge < x.reqKno ||\r\n        this.props.power < x.reqPow\r\n    );\r\n    let equippableItemsComponents =\r\n      equippableItems.length < 10 ? (\r\n        <div className={\"equippableItems\"}>\r\n          {equippableItems.map((x) => (\r\n            <ItemComponent\r\n              key={x.name}\r\n              class={this.props.class}\r\n              type={\r\n                x.type === \"ring\"\r\n                  ? this.props.isRing1Equipped\r\n                    ? \"ring2\"\r\n                    : \"ring1\"\r\n                  : x.type\r\n              }\r\n              item={x}\r\n              level={this.props.level}\r\n              equipItem={this.props.equipItem}\r\n              hideItemsList={this.props.hideItemsList}\r\n              search={true}\r\n            />\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className={\"equippableItems\"}>\r\n          {equippableItems.slice(0, 8).map((x) => (\r\n            <ItemComponent\r\n              key={x.name}\r\n              class={this.props.class}\r\n              type={\r\n                x.type === \"ring\"\r\n                  ? this.props.isRing1Equipped\r\n                    ? \"ring2\"\r\n                    : \"ring1\"\r\n                  : x.type\r\n              }\r\n              item={x}\r\n              level={this.props.level}\r\n              equipItem={this.props.equipItem}\r\n              hideItemsList={this.props.hideItemsList}\r\n              search={true}\r\n            />\r\n          ))}\r\n          <div className=\"itemOnList moreItems\">\r\n            <p>{equippableItems.length - 9}+</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    let unequippableItemsComponents =\r\n      unequippableItems.length < 10 ? (\r\n        <div className={\"unequippableItems\"}>\r\n          {unequippableItems.map((x) => (\r\n            <ItemComponent\r\n              key={x.name}\r\n              item={x}\r\n              class={this.props.class}\r\n              level={this.props.level}\r\n              strength={this.props.strength}\r\n              agility={this.props.agility}\r\n              power={this.props.power}\r\n              knowledge={this.props.knowledge}\r\n            />\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className={\"unequippableItems\"}>\r\n          {unequippableItems.slice(0, 8).map((x) => (\r\n            <ItemComponent\r\n              key={x.name}\r\n              item={x}\r\n              class={this.props.class}\r\n              level={this.props.level}\r\n              strength={this.props.strength}\r\n              agility={this.props.agility}\r\n              power={this.props.power}\r\n              knowledge={this.props.knowledge}\r\n            />\r\n          ))}\r\n          <div className=\"itemOnList moreItems\">\r\n            <p>{unequippableItems.length - 9}+</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    return (\r\n      <div className=\"itemsList\">\r\n        {this.props.items.length ? (\r\n          equippableItemsComponents\r\n        ) : (\r\n          <div className=\"notFound\">\r\n            <p className=\"notFoundMessage\">\r\n              {this.props.t(\"no-items-found\")}\r\n            </p>\r\n          </div>\r\n        )}\r\n        {this.props.items.length ? unequippableItemsComponents : null}\r\n        {closeButton}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const ItemsSearchList = withTranslation()(ConnectedItemsSearchList)\r\n\r\n//Types\r\ninterface PropTypes {\r\n  items: Item[];\r\n  class: string;\r\n  level: number;\r\n  strength: number;\r\n  agility: number;\r\n  power: number;\r\n  knowledge: number;\r\n  isRing1Equipped: boolean;\r\n  equipItem(item: Item, slot: keyof Equipment, search?: boolean): void;\r\n  hideItemsList(): void;\r\n  t(string: string): string;\r\n}\r\n\r\ninterface StateTypes {\r\n  displayAddItemForm: boolean;\r\n}\r\n","//React\r\nimport React from \"react\";\r\nimport ReactGA from \"react-ga\";\r\n\r\n//Components\r\nimport { ItemSlot } from \"./equipment-slots/ItemSlot\";\r\nimport { SpecialSlot } from \"./equipment-slots/SpecialSlot\";\r\nimport { PsychoSlot } from \"./equipment-slots/PsychoSlot\";\r\nimport { GuildSlot } from \"./equipment-slots/GuildSlot\";\r\nimport { ItemsSearchList } from \"./equipment-slots/item-display/ItemSearchList\";\r\n\r\n//Redux\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { RootState } from \"../../../../store/store\";\r\nimport { Dispatch } from \"redux\";\r\n\r\n//Actions\r\nimport {\r\n  equipItem,\r\n  unequipItem,\r\n  unequipAllItems,\r\n  changePsychoLvl,\r\n} from \"../../../../store/equipment-reducer/equipment-reducer\";\r\n\r\n//Shared functionality\r\nimport { confirmAlert } from \"react-confirm-alert\";\r\nimport i18n from \"i18next\";\r\n\r\n//Types\r\nimport { Equipment } from \"../../../../store/equipment-reducer/equipment-reducer\";\r\nimport { Item } from \"../../../../data/models/item.model\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedEquipment extends React.Component<PropTypes, StateTypes> {\r\n  constructor(props: PropTypes) {\r\n    super(props);\r\n    this.equipItem = this.equipItem.bind(this);\r\n    this.unequipItem = this.unequipItem.bind(this);\r\n    this.showItemsList = this.showItemsList.bind(this);\r\n    this.hideItemsList = this.hideItemsList.bind(this);\r\n    this.changePsychoLvl = this.changePsychoLvl.bind(this);\r\n    this.checkIfAnyItemIsEquipped = this.checkIfAnyItemIsEquipped.bind(this);\r\n    this.applyItemFilters = this.applyItemFilters.bind(this);\r\n    this.state = {\r\n      listToDisplay: \"\",\r\n      showOtherProperties: false,\r\n      searchString: \"\",\r\n      filters: {\r\n        rare: false,\r\n        psychoRare: false,\r\n        set: false,\r\n        epic: false,\r\n        class: false,\r\n        strength: false,\r\n        agility: false,\r\n        power: false,\r\n        knowledge: false,\r\n        hp: false,\r\n        mana: false,\r\n        endurance: false,\r\n        fireRes: false,\r\n        energyRes: false,\r\n        frostRes: false,\r\n        curseRes: false,\r\n      },\r\n    };\r\n  }\r\n  componentDidUpdate(prevProps: PropTypes) {\r\n    if (prevProps.level !== this.props.level) {\r\n      this.props.unequipItem(\"guild\")\r\n    }\r\n  }\r\n  showItemsList(type: keyof Equipment) {\r\n    ReactGA.event({\r\n      category: \"Items\",\r\n      action: \"Show List\",\r\n      label: type,\r\n    });\r\n    this.setState({\r\n      listToDisplay: type,\r\n    });\r\n  }\r\n  hideItemsList() {\r\n    this.setState({\r\n      listToDisplay: \"\",\r\n    });\r\n  }\r\n  equipItem(item: Item, type: keyof Equipment, search?: boolean) {\r\n    if (search) {\r\n      ReactGA.event({\r\n        category: \"Items\",\r\n        action: \"Item Search\",\r\n        label: item.name,\r\n      });\r\n      this.setState({ searchString: \"\" });\r\n    } else {\r\n      ReactGA.event({\r\n        category: \"Items\",\r\n        action: \"Item Choice\",\r\n        label: item.name,\r\n      });\r\n    }\r\n    if (type === \"weapon\" && item.weaponType === \"Dwuręczna\") {\r\n      this.props.equipItem(type, item);\r\n      this.props.unequipItem(\"shield\");\r\n    } else if (\r\n      type === \"shield\" &&\r\n      this.props.equipment.weapon !== null &&\r\n      this.props.equipment.weapon.weaponType === \"Dwuręczna\"\r\n    ) {\r\n      this.props.unequipItem(\"weapon\");\r\n      this.props.equipItem(type, item);\r\n    } else {\r\n      this.props.equipItem(type, item);\r\n    }\r\n  }\r\n  unequipItem(slot: keyof Equipment) {\r\n    this.props.unequipItem(slot);\r\n  }\r\n  changePsychoLvl(slot: keyof Equipment, value: number) {\r\n    this.props.changePsychoLvl(slot, value);\r\n  }\r\n  unequipItems() {\r\n    const { t } = this.props;\r\n    confirmAlert({\r\n      customUI: ({ onClose }) => {\r\n        return (\r\n          <div className=\"backdrop\">\r\n            <div className=\"alert-box\">\r\n              <p className=\"alert-text\">{t(\"unequip-all\")}</p>\r\n              <div className=\"alert-box-actions\">\r\n                <button\r\n                  className=\"alert-box-action\"\r\n                  onClick={() => {\r\n                    this.props.unequipAllItems();\r\n                    onClose();\r\n                  }}\r\n                >\r\n                  {t(\"Tak\")}\r\n                </button>\r\n                <button className=\"alert-box-action\" onClick={onClose}>\r\n                  {t(\"Nie\")}\r\n                </button>\r\n              </div>\r\n              <button className=\"close-button\" onClick={onClose}>\r\n                ×\r\n              </button>\r\n            </div>\r\n          </div>\r\n        );\r\n      },\r\n    });\r\n  }\r\n  checkIfAnyItemIsEquipped() {\r\n    let isAnyItemEquipped = false;\r\n    for (let item in this.props.equipment) {\r\n      if (this.props.equipment.hasOwnProperty(item)) {\r\n        isAnyItemEquipped = this.props.equipment[item as keyof Equipment]\r\n          ? true\r\n          : false;\r\n        if (isAnyItemEquipped) {\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return isAnyItemEquipped;\r\n  }\r\n  applyItemFilters(items: Item[]): Item[] {\r\n    let itemsToFilter = [...items];\r\n    let filterTypes = Object.keys(this.state.filters);\r\n    filterTypes.forEach((filterType) => {\r\n      if (filterType === \"class\") {\r\n        itemsToFilter = this.state.filters[filterType]\r\n          ? itemsToFilter.filter((item) => item.class === this.props.class)\r\n          : itemsToFilter;\r\n      } else if (\r\n        !(\r\n          this.state.filters.set ||\r\n          this.state.filters.psychoRare ||\r\n          this.state.filters.rare ||\r\n          this.state.filters.epic\r\n        )\r\n      ) {\r\n        itemsToFilter = this.state.filters[filterType]\r\n          ? itemsToFilter.filter((item) => item[filterType as keyof Item]! > 0)\r\n          : itemsToFilter;\r\n      }\r\n    });\r\n    if (\r\n      this.state.filters.set ||\r\n      this.state.filters.psychoRare ||\r\n      this.state.filters.rare ||\r\n      this.state.filters.epic\r\n    ) {\r\n      itemsToFilter = itemsToFilter.filter((item) => {\r\n        if (this.state.filters.set && item.set) {\r\n          return true;\r\n        } else if (\r\n          this.state.filters.psychoRare &&\r\n          item.rarity === \"Psychorare\"\r\n        ) {\r\n          return true;\r\n        } else if (this.state.filters.rare && item.rarity === \"Rzadki\") {\r\n          return true;\r\n        } else if (this.state.filters.epic && item.rarity === \"Epik\") {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n    return itemsToFilter;\r\n  }\r\n  render() {\r\n    const { t } = this.props;\r\n    let classBackground = {\r\n      backgroundImage: `url(\"images/` + this.props.class + `.svg\")`,\r\n    };\r\n    let equipment = Object.keys(this.props.equipment);\r\n    let equipmentSlots = equipment.filter(\r\n      (x) => x !== \"special\" && x !== \"guild\"\r\n    );\r\n    let equipmentSlotComponents = equipmentSlots.map((x) => (\r\n      <ItemSlot\r\n        key={x}\r\n        type={x as keyof Equipment}\r\n        items={\r\n          x === \"ring1\" || x === \"ring2\"\r\n            ? this.applyItemFilters(this.props.items).filter(\r\n                (y) =>\r\n                  y.type === \"ring\" &&\r\n                  (y.class === null || y.class === this.props.class)\r\n              )\r\n            : this.applyItemFilters(this.props.items).filter(\r\n                (y) =>\r\n                  y.type === x &&\r\n                  (y.class === null || y.class === this.props.class)\r\n              )\r\n        }\r\n        inSlot={this.props.equipment[x as keyof Equipment]}\r\n        class={this.props.class}\r\n        level={this.props.level}\r\n        strength={this.props.strength}\r\n        agility={this.props.agility}\r\n        power={this.props.power}\r\n        knowledge={this.props.knowledge}\r\n        listToDisplay={this.state.listToDisplay}\r\n        equipItem={this.equipItem}\r\n        unequipItem={this.unequipItem}\r\n        showItemsList={this.showItemsList}\r\n        hideItemsList={this.hideItemsList}\r\n        changePsychoLvl={this.changePsychoLvl}\r\n      />\r\n    ));\r\n    let areAnyItemsEquipped = this.checkIfAnyItemIsEquipped();\r\n    let filterTypes = Object.keys(this.state.filters);\r\n    let checkBoxes = filterTypes.map((filterType) => (\r\n      <div key={filterType} className=\"filterLine\">\r\n        <img\r\n          src={\"images/\" + filterType + \".svg\"}\r\n          alt={filterType}\r\n          onClick={() =>\r\n            this.state.filters[filterType]\r\n              ? this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  newState.filters[filterType] = false;\r\n                  return newState;\r\n                })\r\n              : this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  ReactGA.event({\r\n                    category: \"Filters\",\r\n                    action: \"Activate Filter\",\r\n                    label: filterType,\r\n                  });\r\n                  newState.filters[filterType] = true;\r\n                  return newState;\r\n                })\r\n          }\r\n        />\r\n        <input\r\n          type=\"checkbox\"\r\n          className=\"filterInput\"\r\n          name={filterType}\r\n          value={filterType}\r\n          onChange={() =>\r\n            this.state.filters[filterType]\r\n              ? this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  newState.filters[filterType] = false;\r\n                  return newState;\r\n                })\r\n              : this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  ReactGA.event({\r\n                    category: \"Filters\",\r\n                    action: \"Activate Filter\",\r\n                    label: filterType,\r\n                  });\r\n                  newState.filters[filterType] = true;\r\n                  return newState;\r\n                })\r\n          }\r\n          checked={this.state.filters[filterType]}\r\n        />\r\n        <label\r\n          htmlFor={filterType}\r\n          onClick={() =>\r\n            this.state.filters[filterType]\r\n              ? this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  newState.filters[filterType] = false;\r\n                  return newState;\r\n                })\r\n              : this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  ReactGA.event({\r\n                    category: \"Filters\",\r\n                    action: \"Activate Filter\",\r\n                    label: filterType,\r\n                  });\r\n                  newState.filters[filterType] = true;\r\n                  return newState;\r\n                })\r\n          }\r\n        >\r\n          {t(filterType)}\r\n        </label>\r\n      </div>\r\n    ));\r\n    let activeFilters = filterTypes.filter(\r\n      (filterType) => this.state.filters[filterType]\r\n    );\r\n    // eslint-disable-next-line\r\n    let chosenFilters = activeFilters.map((filterType) => {\r\n      if (this.state.filters[filterType]) {\r\n        return (\r\n          <div className=\"chosenFilter\" key={filterType}>\r\n            <p>{t(filterType)}</p>\r\n            <button\r\n              onClick={() =>\r\n                this.setState((prevState) => {\r\n                  let newState = { ...prevState };\r\n                  newState.filters[filterType] = false;\r\n                  return newState;\r\n                })\r\n              }\r\n            ></button>\r\n          </div>\r\n        );\r\n      }\r\n    });\r\n    let filtersCloseButton = (\r\n      <button\r\n        className=\"closeList\"\r\n        onClick={() => this.setState({ listToDisplay: \"\" })}\r\n      >\r\n        ×\r\n      </button>\r\n    );\r\n    let filtersResetButton = (\r\n      <button\r\n        className=\"resetFilters\"\r\n        onClick={() =>\r\n          this.setState({\r\n            filters: {\r\n              rare: false,\r\n              psychoRare: false,\r\n              set: false,\r\n              epic: false,\r\n              class: false,\r\n              strength: false,\r\n              agility: false,\r\n              power: false,\r\n              knowledge: false,\r\n              hp: false,\r\n              mana: false,\r\n              endurance: false,\r\n              fireRes: false,\r\n              energyRes: false,\r\n              frostRes: false,\r\n              curseRes: false\r\n            },\r\n          })\r\n        }\r\n      >\r\n        {t(\"Resetuj\")}\r\n      </button>\r\n    );\r\n    return (\r\n      <div className=\"equipment\">\r\n        <div className=\"filters\">\r\n          <div className=\"search\">\r\n            <img src=\"./images/magnifying-glass.svg\" alt=\"search\" />\r\n            <input\r\n              onChange={(event) =>\r\n                this.setState({\r\n                  searchString: event.currentTarget.value,\r\n                  listToDisplay: \"search\",\r\n                })\r\n              }\r\n              placeholder={t(\"Wpisz nazwę\")}\r\n              value={this.state.searchString}\r\n              onClick={() => this.setState({ listToDisplay: \"search\" })}\r\n            />\r\n            {this.state.searchString &&\r\n            this.state.listToDisplay === \"search\" ? (\r\n              <ItemsSearchList\r\n                items={this.props.items.filter((x) =>\r\n                  this.props.i18n.language === \"pl\"\r\n                    ? x.name\r\n                        .toLowerCase()\r\n                        .includes(this.state.searchString.toLowerCase()) &&\r\n                      (x.class === null || x.class === this.props.class)\r\n                    : t(x.name)\r\n                        .toLowerCase()\r\n                        .includes(this.state.searchString.toLowerCase()) &&\r\n                      (x.class === null || x.class === this.props.class)\r\n                )}\r\n                class={this.props.class}\r\n                level={this.props.level}\r\n                strength={this.props.strength}\r\n                agility={this.props.agility}\r\n                power={this.props.power}\r\n                knowledge={this.props.knowledge}\r\n                isRing1Equipped={!!this.props.equipment.ring1}\r\n                equipItem={this.equipItem}\r\n                hideItemsList={this.hideItemsList}\r\n              />\r\n            ) : null}\r\n          </div>\r\n          <div className=\"filter\">\r\n            <img src=\"./images/funnel.svg\" alt=\"filter\" />\r\n            <div className=\"filtersList\">\r\n              <div\r\n                className=\"chosenFilters\"\r\n                data-placeholder={t(\"active-filters\")}\r\n              >\r\n                {chosenFilters.length > 4\r\n                  ? chosenFilters.slice(0, 4)\r\n                  : chosenFilters}\r\n                {chosenFilters.length > 4 ? (\r\n                  <div className=\"chosenFilter manyFilters\">\r\n                    {chosenFilters.length - 4}+\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n              <button\r\n                className=\"addFilter\"\r\n                onClick={() =>\r\n                  this.state.listToDisplay === \"filters\"\r\n                    ? this.setState({ listToDisplay: \"\" })\r\n                    : this.setState({ listToDisplay: \"filters\" })\r\n                }\r\n              ></button>\r\n              {this.state.listToDisplay === \"filters\" ? (\r\n                <div className=\"itemsList filtersForm\">\r\n                  <div className=\"title\">\r\n                    <p>{t(\"add-filters\")}</p>\r\n                  </div>\r\n                  <div className=\"filterLines\">{checkBoxes}</div>\r\n                  <div className=\"submit\">\r\n                    <button\r\n                      onClick={() => this.setState({ listToDisplay: \"\" })}\r\n                    >\r\n                      {t(\"Zatwierdź\")}\r\n                    </button>\r\n                    {filtersResetButton}\r\n                  </div>\r\n                  {filtersCloseButton}\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {equipmentSlotComponents}\r\n        <PsychoSlot equipment={this.props.equipment} />\r\n        <div className=\"middle\" style={classBackground}>\r\n          {areAnyItemsEquipped ? (\r\n            <button\r\n              className=\"empty\"\r\n              onClick={() => this.unequipItems()}\r\n              title={t(\"Zdejmij wszystkie przedmioty\")}\r\n            ></button>\r\n          ) : null}\r\n          <GuildSlot\r\n            showItemsList={this.showItemsList}\r\n            hideItemsList={this.hideItemsList}\r\n            listToDisplay={this.state.listToDisplay}\r\n            t={t}\r\n            inSlot={this.props.equipment.guild}\r\n          />\r\n        </div>\r\n        <SpecialSlot\r\n          type={\"special\"}\r\n          inSlot={this.props.equipment.special}\r\n          listToDisplay={this.state.listToDisplay}\r\n          equipItem={this.equipItem}\r\n          unequipItem={this.unequipItem}\r\n          showItemsList={this.showItemsList}\r\n          hideItemsList={this.hideItemsList}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  return {\r\n    equipment: state.equipment,\r\n    class: state.character.className,\r\n    level: state.character.level,\r\n    strength: state.stats.strength,\r\n    agility: state.stats.agility,\r\n    power: state.stats.power,\r\n    knowledge: state.stats.knowledge,\r\n    items: state.items,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => {\r\n  return {\r\n    equipItem: (slot: keyof Equipment, item: Item) =>\r\n      dispatch(equipItem({ slot: slot, item: item })),\r\n    unequipItem: (slot: keyof Equipment) =>\r\n      dispatch(unequipItem({ slot: slot })),\r\n    unequipAllItems: () => dispatch(unequipAllItems()),\r\n    changePsychoLvl: (slot: keyof Equipment, value: number) =>\r\n      dispatch(changePsychoLvl({ slot: slot, value: value })),\r\n  };\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport const EquipmentComponent = withTranslation()(\r\n  connector(ConnectedEquipment)\r\n);\r\n\r\n//Types\r\ntype PropTypes = ConnectedProps<typeof connector> & OwnProps;\r\n\r\ninterface OwnProps {\r\n  t(string: string): string;\r\n  i18n: typeof i18n;\r\n}\r\n\r\ninterface StateTypes {\r\n  listToDisplay: keyof Equipment | \"\" | \"search\" | \"filters\" | \"guild\";\r\n  showOtherProperties: boolean;\r\n  searchString: string;\r\n  filters: {\r\n    strength: boolean;\r\n    agility: boolean;\r\n    power: boolean;\r\n    knowledge: boolean;\r\n    hp: boolean;\r\n    mana: boolean;\r\n    endurance: boolean;\r\n    class: boolean;\r\n    rare: boolean;\r\n    psychoRare: boolean;\r\n    set: boolean;\r\n    epic: boolean;\r\n    fireRes: boolean;\r\n    energyRes: boolean;\r\n    frostRes: boolean;\r\n    curseRes: boolean;\r\n    [index: string]: boolean;\r\n  };\r\n}\r\n","import React from \"react\";\r\n\r\nexport function StatIncrementButton(props: Props) {\r\n  if ([\"strength\", \"agility\", \"power\", \"knowledge\"].includes(props.stat)) {\r\n    return (\r\n      <button\r\n        disabled={props.pointsLeft < props.value}\r\n        onClick={() => {\r\n          props.spendStatPoints(props.stat, props.value);\r\n        }}\r\n      >\r\n        +{props.value}\r\n      </button>\r\n    );\r\n  } else {\r\n    return (\r\n      <button\r\n        disabled={props.pointsLeft < props.value}\r\n        onClick={() => {\r\n          props.spendStatPoints(props.stat, props.value);\r\n        }}\r\n      >\r\n        +{props.value * 10}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\ninterface Props {\r\n  stat: string;\r\n  statValue: number;\r\n  value: number;\r\n  spendStatPoints(stat: string, value: number): void;\r\n  pointsLeft: number;\r\n}\r\n","import React from \"react\";\r\n\r\nexport function StatDecrementButton(props: Props) {\r\n  if ([\"strength\", \"agility\", \"power\", \"knowledge\"].includes(props.stat)) {\r\n    return (\r\n      <button\r\n        onClick={() => {\r\n          props.spendStatPoints(props.stat, props.value);\r\n        }}\r\n        disabled={props.statValue === 10 || props.statValue + props.value < 10}\r\n      >\r\n        -{-props.value}\r\n      </button>\r\n    );\r\n  } else {\r\n    return (\r\n      <button\r\n        onClick={() => {\r\n          props.spendStatPoints(props.stat, props.value);\r\n        }}\r\n        disabled={\r\n          props.statValue === 200 || props.statValue + props.value * 10 < 200\r\n        }\r\n      >\r\n        -{-props.value * 10}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\ninterface Props {\r\n  stat: string;\r\n  statValue: number;\r\n  value: number;\r\n  spendStatPoints(stat: string, value: number): void;\r\n}\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Redux\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { RootState } from \"../../../../../store/store\";\r\n\r\n//Shared functionality\r\nimport { calculateOtherProperties } from \"../../../../../shared/calculate-other-properties\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nfunction ConnectedRegenerationTooltip (props: PropTypes) {\r\n  let { t } = props\r\n  let regenRate = 5\r\n  let otherProperties = calculateOtherProperties(props.equipment)\r\n  if (props.stat === \"mana\" && otherProperties[\"Regeneracja many\"]) {\r\n    regenRate += otherProperties[\"Regeneracja many\"]\r\n  } else if (otherProperties[\"Regeneracja kondycji\"]) {\r\n    regenRate += otherProperties[\"Regeneracja kondycji\"]\r\n  }\r\n  return (\r\n    <div className=\"regenTooltip\">\r\n      {t(props.stat === \"mana\" ? \"Regeneracja many\" : \"Regeneracja kondycji\")}: {regenRate}%<br />({Math.floor((regenRate / 100) * props.value)} {t(\"punktów na rundę\")})\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  return {\r\n    equipment: state.equipment,\r\n  };\r\n};\r\n\r\nconst connector = connect(mapStateToProps);\r\n\r\nexport const RegenerationTooltip = withTranslation()(connector(ConnectedRegenerationTooltip));\r\n\r\n//Types\r\ntype PropTypes = ConnectedProps<typeof connector> & OwnProps;\r\n\r\ninterface OwnProps {\r\n  stat: string\r\n  value: number\r\n  t(string: string): string;\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nimport { StatIncrementButton } from \"./stat-buttons/StatIncrementButton\";\r\nimport { StatDecrementButton } from \"./stat-buttons/StatDecrementButton\";\r\nimport { RegenerationTooltip } from \"./regeneration-tooltip/RegenerationTooltip\";\r\n\r\nexport function StatLine(props: Props) {\r\n  const [tooltip, showTooltip] = useState(false);\r\n  let buttonValues = [-10, -1, 1, 10];\r\n  let buttonElements = buttonValues.map((buttonValue) =>\r\n    buttonValue < 0 ? (\r\n      <StatDecrementButton\r\n        spendStatPoints={props.spendStatPoints}\r\n        stat={props.stat}\r\n        statValue={props.value}\r\n        value={buttonValue}\r\n        key={props.stat + \"Dec\" + buttonValue}\r\n      />\r\n    ) : (\r\n      <StatIncrementButton\r\n        spendStatPoints={props.spendStatPoints}\r\n        stat={props.stat}\r\n        statValue={props.value}\r\n        value={buttonValue}\r\n        pointsLeft={props.pointsLeft}\r\n        key={props.stat + \"Inc\" + buttonValue}\r\n      />\r\n    )\r\n  );\r\n  return (\r\n    <div className={\"statLine\"}>\r\n      <img\r\n        src={\"images/\" + props.stat + \".svg\"}\r\n        alt={props.stat}\r\n        className={props.stat}\r\n      />\r\n      <div className=\"statNameButtons\">\r\n        <div className=\"statName\">\r\n          {props.statName} {props.value} ({props.value + props.fromItems}){\" \"}\r\n          {props.stat === \"mana\" || props.stat === \"endurance\" ? (\r\n            <div\r\n              className=\"tooltipIcon\"\r\n              onMouseEnter={() => showTooltip(true)}\r\n              onTouchStart={() => showTooltip(true)}\r\n              onMouseLeave={() => showTooltip(false)}\r\n              onTouchEnd={() => showTooltip(false)}\r\n            >\r\n              <img\r\n                src=\"images/tooltip.svg\"\r\n                alt=\"tooltip\"\r\n                onContextMenu={(event) => {\r\n                  event.preventDefault();\r\n                  event.stopPropagation();\r\n                  return false;\r\n                }}\r\n              />\r\n              {tooltip ? (\r\n                <RegenerationTooltip\r\n                  stat={props.stat}\r\n                  value={props.value + props.fromItems}\r\n                />\r\n              ) : null}\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"statButtons\">{buttonElements}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface Props {\r\n  spendStatPoints(stat: string, value: number): void;\r\n  stat: string;\r\n  statName: string;\r\n  value: number;\r\n  pointsLeft: number;\r\n  fromItems: number;\r\n}\r\n","import React from \"react\";\r\n\r\nexport function ResLine(props: Props) {\r\n  return (\r\n    <div className={\"statLine\"}>\r\n      <img\r\n        src={\"images/\" + props.stat + \".svg\"}\r\n        alt={props.stat}\r\n        className={props.stat}\r\n      />\r\n      <div className=\"statNameButtons\">\r\n        <div className=\"statName\">\r\n          {props.statName} {props.value} ({props.percentageValue}%)\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface Props {\r\n  stat: string;\r\n  statName: string;\r\n  value: number;\r\n  percentageValue: number\r\n}\r\n","import React from \"react\";\r\n\r\nexport function OtherLine(props: Props) {\r\n  return (\r\n    <div className={\"statLine\"}>\r\n      <img\r\n        src={\"images/\" + props.stat + \".svg\"}\r\n        alt={props.stat}\r\n        className={props.stat}\r\n      />\r\n      <div className=\"statNameButtons\">\r\n        <div className=\"statName\">\r\n          {props.statName} {props.value}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface Props {\r\n  stat: string;\r\n  statName: string;\r\n  value: number;\r\n}\r\n","const resTable: number[] = [\r\n  0,\r\n  1,\r\n  2,\r\n  3,\r\n  4,\r\n  5,\r\n  6,\r\n  7,\r\n  8,\r\n  9,\r\n  10,\r\n  11,\r\n  12,\r\n  13,\r\n  14,\r\n  15,\r\n  16,\r\n  17,\r\n  18,\r\n  19,\r\n  20,\r\n  21,\r\n  22,\r\n  23,\r\n  24,\r\n  25,\r\n  26,\r\n  27,\r\n  28,\r\n  29,\r\n  30,\r\n  30.5,\r\n  31,\r\n  31.5,\r\n  32,\r\n  32.5,\r\n  33,\r\n  33.5,\r\n  34,\r\n  34.5,\r\n  35,\r\n  35.5,\r\n  36,\r\n  36.5,\r\n  37,\r\n  37.5,\r\n  38,\r\n  38.5,\r\n  39,\r\n  39.5,\r\n  40,\r\n  40.5,\r\n  41,\r\n  41.5,\r\n  42,\r\n  42.5,\r\n  43,\r\n  43.5,\r\n  44,\r\n  44.5,\r\n  45,\r\n  45.38,\r\n  45.75,\r\n  46.13,\r\n  46.5,\r\n  46.88,\r\n  47.25,\r\n  47.63,\r\n  48,\r\n  48.38,\r\n  48.75,\r\n  49.13,\r\n  49.5,\r\n  49.88,\r\n  50.25,\r\n  50.63,\r\n  51,\r\n  51.38,\r\n  51.75,\r\n  52.13,\r\n  52.5,\r\n  52.88,\r\n  53.25,\r\n  53.63,\r\n  54,\r\n  54.38,\r\n  54.75,\r\n  55.13,\r\n  55.5,\r\n  55.88,\r\n  56.25,\r\n  56.63,\r\n  57,\r\n  57.38,\r\n  57.75,\r\n  58.13,\r\n  58.5,\r\n  58.88,\r\n  59.25,\r\n  59.63,\r\n  60,\r\n  60.19,\r\n  60.38,\r\n  60.57,\r\n  60.76,\r\n  60.95,\r\n  61.14,\r\n  61.33,\r\n  61.52,\r\n  61.71,\r\n  61.9,\r\n  62.09,\r\n  62.28,\r\n  62.47,\r\n  62.66,\r\n  62.85,\r\n  63.04,\r\n  63.23,\r\n  63.42,\r\n  63.61,\r\n  63.8,\r\n  63.99,\r\n  64.18,\r\n  64.37,\r\n  64.56,\r\n  64.75,\r\n  64.94,\r\n  65.13,\r\n  65.32,\r\n  65.51,\r\n  65.7,\r\n  65.89,\r\n  66.08,\r\n  66.27,\r\n  66.46,\r\n  66.65,\r\n  66.84,\r\n  67.03,\r\n  67.22,\r\n  67.41,\r\n  67.6,\r\n  67.79,\r\n  67.98,\r\n  68.17,\r\n  68.36,\r\n  68.55,\r\n  68.74,\r\n  68.93,\r\n  69.12,\r\n  69.31,\r\n  70,\r\n  70.18,\r\n  70.36,\r\n  70.54,\r\n  70.72,\r\n  70.9,\r\n  71.08,\r\n  71.26,\r\n  71.44,\r\n  71.62,\r\n  71.8,\r\n  71.98,\r\n  72.16,\r\n  72.34,\r\n  72.52,\r\n  72.7,\r\n  72.88,\r\n  73.06,\r\n  73.24,\r\n  73.42,\r\n  73.6,\r\n  73.78,\r\n  73.96,\r\n  74.14,\r\n  74.32,\r\n  74.5,\r\n  74.68,\r\n  74.86,\r\n  75.04,\r\n  75.22,\r\n  75.4,\r\n  75.58,\r\n  75.76,\r\n  75.94,\r\n  76.12,\r\n  76.3,\r\n  76.48,\r\n  76.66,\r\n  76.84,\r\n  77.02,\r\n  77.2,\r\n  77.38,\r\n  77.56,\r\n  77.74,\r\n  77.92,\r\n  78.1,\r\n  78.28,\r\n  78.46,\r\n  78.64,\r\n  78.82,\r\n  79,\r\n  79.07,\r\n  79.13,\r\n  79.2,\r\n  79.27,\r\n  79.33,\r\n  79.4,\r\n  79.47,\r\n  79.53,\r\n  79.6,\r\n  79.67,\r\n  79.73,\r\n  79.8,\r\n  79.87,\r\n  79.93,\r\n  80,\r\n  80.04,\r\n  80.08,\r\n  80.12,\r\n  80.16,\r\n  80.2,\r\n  80.24,\r\n  80.28,\r\n  80.32,\r\n  80.36,\r\n  80.4,\r\n  80.44,\r\n  80.48,\r\n  80.52,\r\n  80.56,\r\n  80.6,\r\n  80.64,\r\n  80.68,\r\n  80.72,\r\n  80.76,\r\n  80.8,\r\n  80.84,\r\n  80.88,\r\n  80.92,\r\n  80.96,\r\n  81,\r\n  81.03,\r\n  81.07,\r\n  81.1,\r\n  81.13,\r\n  81.17,\r\n  81.2,\r\n  81.23,\r\n  81.27,\r\n  81.3,\r\n  81.33,\r\n  81.37,\r\n  81.4,\r\n  81.43,\r\n  81.47,\r\n  81.5,\r\n  81.53,\r\n  81.57,\r\n  81.6,\r\n  81.63,\r\n  81.67,\r\n  81.7,\r\n  81.73,\r\n  81.77,\r\n  81.8,\r\n  81.83,\r\n  81.87,\r\n  81.9,\r\n  81.93,\r\n  81.97,\r\n  82,\r\n  82.03,\r\n  82.07,\r\n  82.1,\r\n  82.13,\r\n  82.17,\r\n  82.2,\r\n  82.23,\r\n  82.27,\r\n  82.3,\r\n  82.33,\r\n  82.37,\r\n  82.4,\r\n  82.43,\r\n  82.47,\r\n  82.5,\r\n  82.53,\r\n  82.57,\r\n  82.6,\r\n  82.63,\r\n  82.67,\r\n  82.7,\r\n  82.73,\r\n  82.77,\r\n  82.8,\r\n  82.83,\r\n  82.87,\r\n  82.9,\r\n  82.93,\r\n  82.97,\r\n  83,\r\n  83.03,\r\n  83.07,\r\n  83.1,\r\n  83.13,\r\n  83.17,\r\n  83.2,\r\n  83.23,\r\n  83.27,\r\n  83.3,\r\n  83.33,\r\n  83.37,\r\n  83.4,\r\n  83.43,\r\n  83.47,\r\n  83.5,\r\n  83.53,\r\n  83.57,\r\n  83.6,\r\n  83.63,\r\n  83.67,\r\n  83.7,\r\n  83.73,\r\n  83.77,\r\n  83.8,\r\n  83.83,\r\n  83.87,\r\n  83.9,\r\n  83.93,\r\n  83.97,\r\n  84,\r\n  84.03,\r\n  84.07,\r\n  84.1,\r\n  84.13,\r\n  84.17,\r\n  84.2,\r\n  84.23,\r\n  84.27,\r\n  84.3,\r\n  84.33,\r\n  84.37,\r\n  84.4,\r\n  84.43,\r\n  84.47,\r\n  84.5,\r\n  84.53,\r\n  84.57,\r\n  84.6,\r\n  84.63,\r\n  84.67,\r\n  84.7,\r\n  84.73,\r\n  84.77,\r\n  84.8,\r\n  84.83,\r\n  84.87,\r\n  84.9,\r\n  84.93,\r\n  84.97,\r\n  85,\r\n  85.03,\r\n  85.07,\r\n  85.1,\r\n  85.13,\r\n  85.17,\r\n  85.2,\r\n  85.23,\r\n  85.27,\r\n  85.3,\r\n  85.33,\r\n  85.37,\r\n  85.4,\r\n  85.43,\r\n  85.47,\r\n  85.5,\r\n  85.53,\r\n  85.57,\r\n  85.6,\r\n  85.63,\r\n  85.67,\r\n  85.7,\r\n  85.73,\r\n  85.77,\r\n  85.8,\r\n  85.83,\r\n  85.87,\r\n  85.9,\r\n  85.93,\r\n  85.97,\r\n  86,\r\n  86.03,\r\n  86.07,\r\n  86.1,\r\n  86.13,\r\n  86.17,\r\n  86.2,\r\n  86.23,\r\n  86.27,\r\n  86.3,\r\n  86.33,\r\n  86.37,\r\n  86.4,\r\n  86.43,\r\n  86.47,\r\n  86.5,\r\n  86.53,\r\n  86.57,\r\n  86.6,\r\n  86.63,\r\n  86.67,\r\n  86.7,\r\n  86.73,\r\n  86.77,\r\n  86.8,\r\n  86.83,\r\n  86.87,\r\n  86.9,\r\n  86.93,\r\n  86.97,\r\n  87,\r\n  87.03,\r\n  87.07,\r\n  87.1,\r\n  87.13,\r\n  87.17,\r\n  87.2,\r\n  87.23,\r\n  87.27,\r\n  87.3,\r\n  87.33,\r\n  87.37,\r\n  87.4,\r\n  87.43,\r\n  87.47,\r\n  87.5,\r\n  87.53,\r\n  87.57,\r\n  87.6,\r\n  87.63,\r\n  87.67,\r\n  87.7,\r\n  87.73,\r\n  87.77,\r\n  87.8,\r\n  87.83,\r\n  87.87,\r\n  87.9,\r\n  87.93,\r\n  87.97,\r\n  88,\r\n  88.04,\r\n  88.08,\r\n  88.12,\r\n  88.16,\r\n  88.2,\r\n  88.24,\r\n  88.28,\r\n  88.32,\r\n  88.36,\r\n  88.4,\r\n  88.44,\r\n  88.48,\r\n  88.52,\r\n  88.56,\r\n  88.6,\r\n  88.64,\r\n  88.68,\r\n  88.72,\r\n  88.76,\r\n  88.8,\r\n  88.84,\r\n  88.88,\r\n  88.92,\r\n  88.96,\r\n  89,\r\n  89.04,\r\n  89.08,\r\n  89.12,\r\n  89.16,\r\n  89.2,\r\n  89.24,\r\n  89.28,\r\n  89.32,\r\n  89.36,\r\n  89.4,\r\n  89.44,\r\n  89.48,\r\n  89.52,\r\n  89.56,\r\n  89.6,\r\n  89.64,\r\n  89.68,\r\n  89.72,\r\n  89.76,\r\n  89.8,\r\n  89.84,\r\n  89.88,\r\n  89.92,\r\n  89.96,\r\n  90,\r\n  90.02,\r\n  90.04,\r\n  90.06,\r\n  90.08,\r\n  90.1,\r\n  90.12,\r\n  90.14,\r\n  90.16,\r\n  90.18,\r\n  90.2,\r\n  90.22,\r\n  90.24,\r\n  90.26,\r\n  90.28,\r\n  90.3,\r\n  90.32,\r\n  90.34,\r\n  90.36,\r\n  90.38,\r\n  90.4,\r\n  90.42,\r\n  90.44,\r\n  90.46,\r\n  90.48,\r\n  90.5,\r\n  90.52,\r\n  90.54,\r\n  90.56,\r\n  90.58,\r\n  90.6,\r\n  90.62,\r\n  90.64,\r\n  90.66,\r\n  90.68,\r\n  90.7,\r\n  90.72,\r\n  90.74,\r\n  90.76,\r\n  90.78,\r\n  90.8,\r\n  90.82,\r\n  90.84,\r\n  90.86,\r\n  90.88,\r\n  90.9,\r\n  90.92,\r\n  90.94,\r\n  90.96,\r\n  90.98,\r\n  91,\r\n  91.02,\r\n  91.04,\r\n  91.06,\r\n  91.08,\r\n  91.1,\r\n  91.12,\r\n  91.14,\r\n  91.16,\r\n  91.18,\r\n  91.2,\r\n  91.22,\r\n  91.24,\r\n  91.26,\r\n  91.28,\r\n  91.3,\r\n  91.32,\r\n  91.34,\r\n  91.36,\r\n  91.38,\r\n  91.4,\r\n  91.42,\r\n  91.44,\r\n  91.46,\r\n  91.48,\r\n  91.5,\r\n  91.52,\r\n  91.54,\r\n  91.56,\r\n  91.58,\r\n  91.6,\r\n  91.62,\r\n  91.64,\r\n  91.66,\r\n  91.68,\r\n  91.7,\r\n  91.72,\r\n  91.74,\r\n  91.76,\r\n  91.78,\r\n  91.8,\r\n  91.82,\r\n  91.84,\r\n  91.86,\r\n  91.88,\r\n  91.9,\r\n  91.92,\r\n  91.94,\r\n  91.96,\r\n  91.98,\r\n  92,\r\n  92.02,\r\n  92.04,\r\n  92.06,\r\n  92.08,\r\n  92.1,\r\n  92.12,\r\n  92.14,\r\n  92.16,\r\n  92.18,\r\n  92.2,\r\n  92.22,\r\n  92.24,\r\n  92.26,\r\n  92.28,\r\n  92.3,\r\n  92.32,\r\n  92.34,\r\n  92.36,\r\n  92.38,\r\n  92.4,\r\n  92.42,\r\n  92.44,\r\n  92.46,\r\n  92.48,\r\n  92.5,\r\n  92.52,\r\n  92.54,\r\n  92.56,\r\n  92.58,\r\n  92.6,\r\n  92.62,\r\n  92.64,\r\n  92.66,\r\n  92.68,\r\n  92.7,\r\n  92.72,\r\n  92.74,\r\n  92.76,\r\n  92.78,\r\n  92.8,\r\n  92.82,\r\n  92.84,\r\n  92.86,\r\n  92.88,\r\n  92.9,\r\n  92.92,\r\n  92.94,\r\n  92.96,\r\n  92.98,\r\n  93,\r\n  93.02,\r\n  93.04,\r\n  93.06,\r\n  93.08,\r\n  93.1,\r\n  93.12,\r\n  93.14,\r\n  93.16,\r\n  93.18,\r\n  93.2,\r\n  93.22,\r\n  93.24,\r\n  93.26,\r\n  93.28,\r\n  93.3,\r\n  93.32,\r\n  93.34,\r\n  93.36,\r\n  93.38,\r\n  93.4,\r\n  93.42,\r\n  93.44,\r\n  93.46,\r\n  93.48,\r\n  93.5,\r\n  93.52,\r\n  93.54,\r\n  93.56,\r\n  93.58,\r\n  93.6,\r\n  93.62,\r\n  93.64,\r\n  93.66,\r\n  93.68,\r\n  93.7,\r\n  93.72,\r\n  93.74,\r\n  93.76,\r\n  93.78,\r\n  93.8,\r\n  93.82,\r\n  93.84,\r\n  93.86,\r\n  93.88,\r\n  93.9,\r\n  93.92,\r\n  93.94,\r\n  93.96,\r\n  93.98,\r\n  94,\r\n  94.02,\r\n  94.04,\r\n  94.06,\r\n  94.08,\r\n  94.1,\r\n  94.12,\r\n  94.14,\r\n  94.16,\r\n  94.18,\r\n  94.2,\r\n  94.22,\r\n  94.24,\r\n  94.26,\r\n  94.28,\r\n  94.3,\r\n  94.32,\r\n  94.34,\r\n  94.36,\r\n  94.38,\r\n  94.4,\r\n  94.42,\r\n  94.44,\r\n  94.46,\r\n  94.48,\r\n  94.5,\r\n  94.52,\r\n  94.54,\r\n  94.56,\r\n  94.58,\r\n  94.6,\r\n  94.62,\r\n  94.64,\r\n  94.66,\r\n  94.68,\r\n  94.7,\r\n  94.72,\r\n  94.74,\r\n  94.76,\r\n  94.78,\r\n  94.8,\r\n  94.82,\r\n  94.84,\r\n  94.86,\r\n  94.88,\r\n  94.9,\r\n  94.92,\r\n  94.94,\r\n  94.96,\r\n  94.98,\r\n  95,\r\n  95.02,\r\n  95.04,\r\n  95.06,\r\n  95.08,\r\n  95.1,\r\n  95.12,\r\n  95.14,\r\n  95.16,\r\n  95.18,\r\n  95.2,\r\n  95.22,\r\n  95.24,\r\n  95.26,\r\n  95.28,\r\n  95.3,\r\n  95.32,\r\n  95.34,\r\n  95.36,\r\n  95.38,\r\n  95.4,\r\n  95.42,\r\n  95.44,\r\n  95.46,\r\n  95.48,\r\n  95.5,\r\n  95.52,\r\n  95.54,\r\n  95.56,\r\n  95.58,\r\n  95.6,\r\n  95.62,\r\n  95.64,\r\n  95.66,\r\n  95.68,\r\n  95.7,\r\n  95.72,\r\n  95.74,\r\n  95.76,\r\n  95.78,\r\n  95.8,\r\n  95.82,\r\n  95.84,\r\n  95.86,\r\n  95.88,\r\n  95.9,\r\n  95.92,\r\n  95.94,\r\n  95.96,\r\n  95.98,\r\n  96,\r\n  96.02,\r\n  96.04,\r\n  96.06,\r\n  96.08,\r\n  96.1,\r\n  96.12,\r\n  96.14,\r\n  96.16,\r\n  96.18,\r\n  96.2,\r\n  96.22,\r\n  96.24,\r\n  96.26,\r\n  96.28,\r\n  96.3,\r\n  96.32,\r\n  96.34,\r\n  96.36,\r\n  96.38,\r\n  96.4,\r\n  96.42,\r\n  96.44,\r\n  96.46,\r\n  96.48,\r\n  96.5,\r\n  96.52,\r\n  96.54,\r\n  96.56,\r\n  96.58,\r\n  96.6,\r\n  96.62,\r\n  96.64,\r\n  96.66,\r\n  96.68,\r\n  96.7,\r\n  96.72,\r\n  96.74,\r\n  96.76,\r\n  96.78,\r\n  96.8,\r\n  96.82,\r\n  96.84,\r\n  96.86,\r\n  96.88,\r\n  96.9,\r\n  96.92,\r\n  96.94,\r\n  96.96,\r\n  96.98,\r\n  97,\r\n  97.02,\r\n  97.04,\r\n  97.06,\r\n  97.08,\r\n  97.1,\r\n  97.12,\r\n  97.14,\r\n  97.16,\r\n  97.18,\r\n  97.2,\r\n  97.22,\r\n  97.24,\r\n  97.26,\r\n  97.28,\r\n  97.3,\r\n  97.32,\r\n  97.34,\r\n  97.36,\r\n  97.38,\r\n  97.4,\r\n  97.42,\r\n  97.44,\r\n  97.46,\r\n  97.48,\r\n  97.5,\r\n  97.52,\r\n  97.54,\r\n  97.56,\r\n  97.58,\r\n  97.6,\r\n  97.62,\r\n  97.64,\r\n  97.66,\r\n  97.68,\r\n  97.7,\r\n  97.72,\r\n  97.74,\r\n  97.76,\r\n  97.78,\r\n  97.8,\r\n  97.82,\r\n  97.84,\r\n  97.86,\r\n  97.88,\r\n  97.9,\r\n  97.92,\r\n  97.94,\r\n  97.96,\r\n  97.98,\r\n  98,\r\n  98.02,\r\n  98.04,\r\n  98.06,\r\n  98.08,\r\n  98.1,\r\n  98.12,\r\n  98.14,\r\n  98.16,\r\n  98.18,\r\n  98.2,\r\n  98.22,\r\n  98.24,\r\n  98.26,\r\n  98.28,\r\n  98.3,\r\n  98.32,\r\n  98.34,\r\n  98.36,\r\n  98.38,\r\n  98.4,\r\n  98.42,\r\n  98.44,\r\n  98.46,\r\n  98.48,\r\n  98.5,\r\n  98.52,\r\n  98.54,\r\n  98.56,\r\n  98.58,\r\n  98.6,\r\n  98.62,\r\n  98.64,\r\n  98.66,\r\n  98.68,\r\n  98.7,\r\n  98.72,\r\n  98.74,\r\n  98.76,\r\n  98.78,\r\n  98.8,\r\n  98.82,\r\n  98.84,\r\n  98.86,\r\n  98.88,\r\n  98.9,\r\n  98.92,\r\n  98.94,\r\n  98.96,\r\n  98.98,\r\n  99,\r\n  99.02,\r\n  99.04,\r\n  99.06,\r\n  99.08,\r\n  99.1,\r\n  99.12,\r\n  99.14,\r\n  99.16,\r\n  99.18,\r\n  99.2,\r\n  99.22,\r\n  99.24,\r\n  99.26,\r\n  99.28,\r\n  99.3,\r\n  99.32,\r\n  99.34,\r\n  99.36,\r\n  99.38,\r\n  99.4,\r\n  99.42,\r\n  99.44,\r\n  99.46,\r\n  99.48,\r\n  99.5,\r\n  99.52,\r\n  99.54,\r\n  99.56,\r\n  99.58,\r\n  99.6,\r\n  99.62,\r\n  99.64,\r\n  99.66,\r\n  99.68,\r\n  99.7,\r\n  99.72,\r\n  99.74,\r\n  99.76,\r\n  99.78,\r\n  99.8,\r\n  99.82,\r\n  99.84,\r\n  99.86,\r\n  99.88,\r\n  99.9,\r\n  99.92,\r\n  99.94,\r\n  99.96,\r\n  99.98,\r\n  100,\r\n];\r\n\r\nexport default resTable\r\n","//React\r\nimport React from \"react\";\r\n\r\n//Redux\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { RootState } from \"../../../store/store\";\r\nimport { Dispatch } from \"redux\";\r\n\r\n//Components\r\nimport { EquipmentComponent } from \"./equipment/Equipment\";\r\nimport { StatLine } from \"./stat-line/StatLine\";\r\nimport { ResLine } from \"./resist-line/ResLine\";\r\nimport { OtherLine } from \"./other-line/OtherLine\";\r\n\r\n//Shared functionality\r\nimport { calculateStatsFromItems } from \"../../../shared/calculate-stats-from-items\"\r\n\r\n//Data\r\nimport resTable from \"../../../data/resistance-table\";\r\n\r\n//Actions\r\nimport { changeStat } from \"../../../store/stats-reducer/stats-reducer\";\r\nimport { resetStatPoints } from \"../../../store/stats-reducer/stats-reducer\";\r\n\r\n//i18l\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nclass ConnectedStatsCalculator extends React.Component<PropTypes> {\r\n  constructor(props: PropTypes) {\r\n    super(props);\r\n    this.spendStatPoints = this.spendStatPoints.bind(this);\r\n    this.reset = this.reset.bind(this);\r\n  }\r\n  spendStatPoints(stat: StatNames, value: number) {\r\n    this.props.changeStat(stat, value);\r\n  }\r\n  reset() {\r\n    this.props.resetStatPoints();\r\n  }\r\n  calculateResistances(res: number): number {\r\n    let resPercentage: number = 0;\r\n    if (res <= 1000) {\r\n      resPercentage = resTable[res];\r\n    } else {\r\n      resPercentage = 100;\r\n    }\r\n    return resPercentage;\r\n  }\r\n  calculateTotalPower(): number {\r\n    let power: number = 0;\r\n    power +=\r\n      this.props.statsFromItems.strength + this.props.strength +\r\n      this.props.statsFromItems.agility + this.props.agility +\r\n      this.props.statsFromItems.power + this.props.power +\r\n      this.props.statsFromItems.knowledge + this.props.knowledge +\r\n      Math.round(\r\n        Math.round((this.props.statsFromItems.hp + this.props.hp) / 10) +\r\n          Math.round((this.props.statsFromItems.mana + this.props.mana) / 10) +\r\n          Math.round((this.props.statsFromItems.endurance + this.props.endurance) / 10)\r\n      ) +\r\n      Math.round(this.calculateResistances(this.props.statsFromItems.fireRes)) +\r\n      Math.round(\r\n        this.calculateResistances(this.props.statsFromItems.frostRes)\r\n      ) +\r\n      Math.round(\r\n        this.calculateResistances(this.props.statsFromItems.energyRes)\r\n      ) +\r\n      Math.round(\r\n        Math.round(\r\n          this.calculateResistances(this.props.statsFromItems.curseRes)\r\n        ) * 1.5\r\n      ) +\r\n      Math.round(\r\n        (Math.round(\r\n          this.calculateResistances(this.props.statsFromItems.cutRes)\r\n        ) +\r\n          Math.round(\r\n            this.calculateResistances(this.props.statsFromItems.pierceRes)\r\n          ) +\r\n          Math.round(\r\n            this.calculateResistances(this.props.statsFromItems.bluntRes)\r\n          )) /\r\n          2\r\n      );\r\n    return power;\r\n  }\r\n  render() {\r\n    const { t } = this.props\r\n    let negativePoints = {\r\n      color: \"red\",\r\n    };\r\n    let statNames = [\r\n      \"strength\",\r\n      \"agility\",\r\n      \"power\",\r\n      \"knowledge\",\r\n      \"hp\",\r\n      \"mana\",\r\n      \"endurance\",\r\n    ];\r\n    let resistNames = [\r\n      \"cutRes\",\r\n      \"bluntRes\",\r\n      \"pierceRes\",\r\n      \"fireRes\",\r\n      \"energyRes\",\r\n      \"frostRes\",\r\n      \"curseRes\",\r\n    ];\r\n    let statComponents = statNames.map((statName) => (\r\n      <StatLine\r\n        spendStatPoints={this.spendStatPoints}\r\n        stat={statName}\r\n        statName={t(statName)}\r\n        value={this.props[statName as keyof Stats]}\r\n        pointsLeft={this.props.statPts}\r\n        fromItems={this.props.statsFromItems[statName as keyof Stats]}\r\n        key={statName}\r\n      />\r\n    ));\r\n    let resistComponents = resistNames.map((statName) => (\r\n      <ResLine\r\n        stat={statName}\r\n        statName={t(statName)}\r\n        value={this.props.statsFromItems[statName as keyof Resists]}\r\n        percentageValue={this.calculateResistances(\r\n          this.props.statsFromItems[statName as keyof Resists]\r\n        )}\r\n        key={statName}\r\n      />\r\n    ));\r\n    return (\r\n      <div\r\n        className=\"statsCalculator\"\r\n      >\r\n        <div className=\"stats\">\r\n          <p className=\"points\">\r\n            <span style={this.props.statPts < 0 ? negativePoints : undefined}>\r\n              {t(\"Punkty statystyk\")}: {this.props.statPts}\r\n            </span>{\" \"}\r\n            <button className={\"inlineButton\"} onClick={() => this.reset()}>\r\n              {t(\"Reset\")}\r\n            </button>\r\n          </p>\r\n          <div className=\"linesAndEq\">\r\n            <EquipmentComponent />\r\n            <div className=\"statsAndRes\">\r\n              <div className=\"statLines\">\r\n                <OtherLine\r\n                  stat=\"damage\"\r\n                  statName={t(\"Obrażenia\")}\r\n                  value={this.props.statsFromItems.damage}\r\n                />\r\n                {statComponents}\r\n              </div>\r\n              <div className=\"resLines\">\r\n                <OtherLine\r\n                  stat=\"characterPower\"\r\n                  statName={t(\"char-power\")}\r\n                  value={this.calculateTotalPower()}\r\n                />\r\n                {resistComponents}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => {\r\n  return {\r\n    statPts: state.stats.statPts,\r\n    strength: state.stats.strength,\r\n    agility: state.stats.agility,\r\n    power: state.stats.power,\r\n    knowledge: state.stats.knowledge,\r\n    hp: state.stats.hp,\r\n    endurance: state.stats.endurance,\r\n    mana: state.stats.mana,\r\n    statsFromItems: calculateStatsFromItems(\r\n      state.equipment,\r\n      state.character.level\r\n    ),\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => {\r\n  return {\r\n    changeStat: (stat: StatNames, value: number) =>\r\n      dispatch(changeStat({ stat: stat, value: value })),\r\n    resetStatPoints: () => dispatch(resetStatPoints()),\r\n  };\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\nexport default withTranslation()(connector(ConnectedStatsCalculator));\r\n\r\n//Types\r\ntype PropTypes = ConnectedProps<typeof connector> & OwnProps;\r\n\r\ninterface OwnProps {\r\n  t(string: string): string;\r\n}\r\n\r\ninterface Resists {\r\n  bluntRes: number;\r\n  cutRes: number;\r\n  pierceRes: number;\r\n  fireRes: number;\r\n  energyRes: number;\r\n  curseRes: number;\r\n  frostRes: number;\r\n}\r\n\r\ninterface Stats {\r\n  hp: number;\r\n  mana: number;\r\n  endurance: number;\r\n  strength: number;\r\n  agility: number;\r\n  power: number;\r\n  knowledge: number;\r\n}\r\n\r\ntype StatNames =\r\n  | \"strength\"\r\n  | \"agility\"\r\n  | \"knowledge\"\r\n  | \"power\"\r\n  | \"hp\"\r\n  | \"mana\"\r\n  | \"endurance\";\r\n"],"sourceRoot":""}